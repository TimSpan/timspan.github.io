<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>React | KBlog</title><meta name="description" content="KBlog">
    <link rel="modulepreload" href="/assets/app.4409970e.js"><link rel="modulepreload" href="/assets/React.html.075d6b93.js"><link rel="modulepreload" href="/assets/React.html.734ff348.js"><link rel="prefetch" href="/assets/index.html.9bd8fa5e.js"><link rel="prefetch" href="/assets/Git.html.5fd7768b.js"><link rel="prefetch" href="/assets/React学习.html.dba41bb9.js"><link rel="prefetch" href="/assets/Vite_React构建项目.html.554c720e.js"><link rel="prefetch" href="/assets/class类.html.78dad533.js"><link rel="prefetch" href="/assets/data-自定义属性.html.bf9b733f.js"><link rel="prefetch" href="/assets/DOM节点.html.1e565be1.js"><link rel="prefetch" href="/assets/ES6.html.1f774e59.js"><link rel="prefetch" href="/assets/Function函数.html.9cf872e2.js"><link rel="prefetch" href="/assets/getElementsByClassName.html.89ae48d0.js"><link rel="prefetch" href="/assets/JavaScript控制结构.html.8cd64c62.js"><link rel="prefetch" href="/assets/JavaScript显式转换.html.10f05d5c.js"><link rel="prefetch" href="/assets/JavaScript隐式转换.html.b18369f4.js"><link rel="prefetch" href="/assets/JaveScript_object.html.0651c5d0.js"><link rel="prefetch" href="/assets/jQuery.html.3d2e856a.js"><link rel="prefetch" href="/assets/JS_Base.html.39172b24.js"><link rel="prefetch" href="/assets/JS执行机制.html.2b286877.js"><link rel="prefetch" href="/assets/Math.html.03dc3519.js"><link rel="prefetch" href="/assets/SPA.html.a8a7a7b3.js"><link rel="prefetch" href="/assets/事件对象.html.1467922b.js"><link rel="prefetch" href="/assets/事件流.html.ff5ced0d.js"><link rel="prefetch" href="/assets/二维数组.html.a4e05fc2.js"><link rel="prefetch" href="/assets/交集与并集选择器.html.5aa457c3.js"><link rel="prefetch" href="/assets/元素滚动事件.html.06083065.js"><link rel="prefetch" href="/assets/前端面试题.html.bc29ee23.js"><link rel="prefetch" href="/assets/展开语法.html.75e743fb.js"><link rel="prefetch" href="/assets/循环.html.a4c2d7f3.js"><link rel="prefetch" href="/assets/数组.html.bc6285f9.js"><link rel="prefetch" href="/assets/构造函数.html.96be9e3b.js"><link rel="prefetch" href="/assets/案例.html.f8ed8be5.js"><link rel="prefetch" href="/assets/解构赋值.html.8b4622f8.js"><link rel="prefetch" href="/assets/重绘与回流.html.c962a565.js"><link rel="prefetch" href="/assets/闭包.html.0263d4bf.js"><link rel="prefetch" href="/assets/Ajax.html.f33e4c8b.js"><link rel="prefetch" href="/assets/axios.html.92e1dfb3.js"><link rel="prefetch" href="/assets/es6模块化.html.940960f4.js"><link rel="prefetch" href="/assets/express.html.99377709.js"><link rel="prefetch" href="/assets/Promise.html.8ae266f3.js"><link rel="prefetch" href="/assets/npm使用手册.html.563456c5.js"><link rel="prefetch" href="/assets/npm命令发生的事.html.d0d96222.js"><link rel="prefetch" href="/assets/vite_vue3.html.4a1fb30e.js"><link rel="prefetch" href="/assets/Vite.html.78029b09.js"><link rel="prefetch" href="/assets/Vue-Router.html.692dab5c.js"><link rel="prefetch" href="/assets/Vue2第一章.html.369f8124.js"><link rel="prefetch" href="/assets/Vue2第三章_组件.html.20556b99.js"><link rel="prefetch" href="/assets/Vue2第二章.html.21ae0490.js"><link rel="prefetch" href="/assets/Vue3.html.16eb0162.js"><link rel="prefetch" href="/assets/Vue3和JSX.html.eb1e217f.js"><link rel="prefetch" href="/assets/vue3快速上手.html.8f4e9f72.js"><link rel="prefetch" href="/assets/VueCLI.html.87f70eb5.js"><link rel="prefetch" href="/assets/vuepress.html.a675a315.js"><link rel="prefetch" href="/assets/vuepressBuild部署.html.64283a07.js"><link rel="prefetch" href="/assets/wechat-01.html.85072e91.js"><link rel="prefetch" href="/assets/wechat-02.html.89038517.js"><link rel="prefetch" href="/assets/wechat-03.html.439de1dd.js"><link rel="prefetch" href="/assets/wechat-04.html.67e37bb7.js"><link rel="prefetch" href="/assets/wechat-05.html.ebd0231c.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.cba4b748.js"><link rel="prefetch" href="/assets/Git.html.cdf1f0e6.js"><link rel="prefetch" href="/assets/React学习.html.97acd3ab.js"><link rel="prefetch" href="/assets/Vite_React构建项目.html.d731d69d.js"><link rel="prefetch" href="/assets/class类.html.6ee9203c.js"><link rel="prefetch" href="/assets/data-自定义属性.html.0f13eec3.js"><link rel="prefetch" href="/assets/DOM节点.html.3755bad6.js"><link rel="prefetch" href="/assets/ES6.html.fdf499c9.js"><link rel="prefetch" href="/assets/Function函数.html.5993ecb3.js"><link rel="prefetch" href="/assets/getElementsByClassName.html.31efea10.js"><link rel="prefetch" href="/assets/JavaScript控制结构.html.aedbecbe.js"><link rel="prefetch" href="/assets/JavaScript显式转换.html.9622e168.js"><link rel="prefetch" href="/assets/JavaScript隐式转换.html.ba57ac40.js"><link rel="prefetch" href="/assets/JaveScript_object.html.d41fd88f.js"><link rel="prefetch" href="/assets/jQuery.html.9b1a642d.js"><link rel="prefetch" href="/assets/JS_Base.html.9c30c146.js"><link rel="prefetch" href="/assets/JS执行机制.html.83181ec8.js"><link rel="prefetch" href="/assets/Math.html.21d0a79d.js"><link rel="prefetch" href="/assets/SPA.html.6da87a88.js"><link rel="prefetch" href="/assets/事件对象.html.8f261e40.js"><link rel="prefetch" href="/assets/事件流.html.8b8156f0.js"><link rel="prefetch" href="/assets/二维数组.html.655fd038.js"><link rel="prefetch" href="/assets/交集与并集选择器.html.2675df48.js"><link rel="prefetch" href="/assets/元素滚动事件.html.7b0c5faa.js"><link rel="prefetch" href="/assets/前端面试题.html.0a46543a.js"><link rel="prefetch" href="/assets/展开语法.html.9807030d.js"><link rel="prefetch" href="/assets/循环.html.685576be.js"><link rel="prefetch" href="/assets/数组.html.2284544a.js"><link rel="prefetch" href="/assets/构造函数.html.a6d6d86d.js"><link rel="prefetch" href="/assets/案例.html.ca71cea3.js"><link rel="prefetch" href="/assets/解构赋值.html.5d014b2e.js"><link rel="prefetch" href="/assets/重绘与回流.html.63e1ccf7.js"><link rel="prefetch" href="/assets/闭包.html.16232180.js"><link rel="prefetch" href="/assets/Ajax.html.150de746.js"><link rel="prefetch" href="/assets/axios.html.5754bbd8.js"><link rel="prefetch" href="/assets/es6模块化.html.400ecc97.js"><link rel="prefetch" href="/assets/express.html.524e0a4b.js"><link rel="prefetch" href="/assets/Promise.html.c60c3ba0.js"><link rel="prefetch" href="/assets/npm使用手册.html.8f43ea67.js"><link rel="prefetch" href="/assets/npm命令发生的事.html.3b0e82af.js"><link rel="prefetch" href="/assets/vite_vue3.html.731bda18.js"><link rel="prefetch" href="/assets/Vite.html.60c8cecd.js"><link rel="prefetch" href="/assets/Vue-Router.html.08c01d00.js"><link rel="prefetch" href="/assets/Vue2第一章.html.310b2aea.js"><link rel="prefetch" href="/assets/Vue2第三章_组件.html.40b7efb7.js"><link rel="prefetch" href="/assets/Vue2第二章.html.e8ba8a77.js"><link rel="prefetch" href="/assets/Vue3.html.c9642658.js"><link rel="prefetch" href="/assets/Vue3和JSX.html.758c694f.js"><link rel="prefetch" href="/assets/vue3快速上手.html.aa430504.js"><link rel="prefetch" href="/assets/VueCLI.html.b33a6056.js"><link rel="prefetch" href="/assets/vuepress.html.73b4e026.js"><link rel="prefetch" href="/assets/vuepressBuild部署.html.e532acb8.js"><link rel="prefetch" href="/assets/wechat-01.html.579db5b8.js"><link rel="prefetch" href="/assets/wechat-02.html.28064df4.js"><link rel="prefetch" href="/assets/wechat-03.html.c36d06ab.js"><link rel="prefetch" href="/assets/wechat-04.html.df40bd68.js"><link rel="prefetch" href="/assets/wechat-05.html.410a33c5.js"><link rel="prefetch" href="/assets/404.html.2f25284b.js"><link rel="prefetch" href="/assets/404.ff4e6462.js"><link rel="prefetch" href="/assets/Layout.9ea9cd68.js">
    <link rel="stylesheet" href="/assets/style.acf36ec1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">KBlog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/react/React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小程序"><span class="title">小程序</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小程序"><span class="title">小程序</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-01.md" class="" aria-label="小程序-01"><!--[--><!--]--> 小程序-01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-02.md" class="" aria-label="小程序-02"><!--[--><!--]--> 小程序-02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-03.md" class="" aria-label="小程序-03"><!--[--><!--]--> 小程序-03 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-04.md" class="" aria-label="小程序-04"><!--[--><!--]--> 小程序-04 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-05.md" class="" aria-label="小程序-05"><!--[--><!--]--> 小程序-05 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/node/node.md" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/Ajax.md" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm使用手册.md" class="" aria-label="npm使用手册"><!--[--><!--]--> npm使用手册 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm命令发生的事.md" class="" aria-label="npm命令发生了什么"><!--[--><!--]--> npm命令发生了什么 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/es6模块化.md" class="" aria-label="ES6模块化"><!--[--><!--]--> ES6模块化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/vue/vue3快速上手.md" class="" aria-label="Vue3快速上手"><!--[--><!--]--> Vue3快速上手 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/Vue-Router.md" class="" aria-label="Vue-Router3"><!--[--><!--]--> Vue-Router3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/vuepress.md" class="" aria-label="VuePress使用手册-V2.0"><!--[--><!--]--> VuePress使用手册-V2.0 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/js/构造函数.md" class="" aria-label="构造函数与原型以及class类"><!--[--><!--]--> 构造函数与原型以及class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/class类.md" class="" aria-label="class类"><!--[--><!--]--> class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/Function函数.md" class="" aria-label="深入理解函数"><!--[--><!--]--> 深入理解函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/闭包.md" class="" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件对象.md" class="" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件流.md" class="" aria-label="深入理解事件流"><!--[--><!--]--> 深入理解事件流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/展开语法.md" class="" aria-label="展开语法"><!--[--><!--]--> 展开语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/数组.md" class="" aria-label="Array数组"><!--[--><!--]--> Array数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/二维数组.md" class="" aria-label="二维数组"><!--[--><!--]--> 二维数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/重绘与回流.md" class="" aria-label="重绘与回流"><!--[--><!--]--> 重绘与回流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/DOM节点.md" class="" aria-label="DOM节点"><!--[--><!--]--> DOM节点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JaveScript_object.md" class="" aria-label="对象Object"><!--[--><!--]--> 对象Object <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript控制结构.md" class="" aria-label="控制结构"><!--[--><!--]--> 控制结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript隐式转换.md" class="" aria-label="隐式转换"><!--[--><!--]--> 隐式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript显式转换.md" class="" aria-label="显式转换"><!--[--><!--]--> 显式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/解构赋值.md" class="" aria-label="解构赋值"><!--[--><!--]--> 解构赋值 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/data-自定义属性.md" class="" aria-label="data-自定义属性"><!--[--><!--]--> data-自定义属性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/git/Git.md" class="" aria-label="Git分布式版本控制"><!--[--><!--]--> Git分布式版本控制 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/react/React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小程序"><span class="title">小程序</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小程序"><span class="title">小程序</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-01.md" class="" aria-label="小程序-01"><!--[--><!--]--> 小程序-01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-02.md" class="" aria-label="小程序-02"><!--[--><!--]--> 小程序-02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-03.md" class="" aria-label="小程序-03"><!--[--><!--]--> 小程序-03 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-04.md" class="" aria-label="小程序-04"><!--[--><!--]--> 小程序-04 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-05.md" class="" aria-label="小程序-05"><!--[--><!--]--> 小程序-05 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/node/node.md" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/Ajax.md" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm使用手册.md" class="" aria-label="npm使用手册"><!--[--><!--]--> npm使用手册 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm命令发生的事.md" class="" aria-label="npm命令发生了什么"><!--[--><!--]--> npm命令发生了什么 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/es6模块化.md" class="" aria-label="ES6模块化"><!--[--><!--]--> ES6模块化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/vue/vue3快速上手.md" class="" aria-label="Vue3快速上手"><!--[--><!--]--> Vue3快速上手 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/Vue-Router.md" class="" aria-label="Vue-Router3"><!--[--><!--]--> Vue-Router3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/vuepress.md" class="" aria-label="VuePress使用手册-V2.0"><!--[--><!--]--> VuePress使用手册-V2.0 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/js/构造函数.md" class="" aria-label="构造函数与原型以及class类"><!--[--><!--]--> 构造函数与原型以及class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/class类.md" class="" aria-label="class类"><!--[--><!--]--> class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/Function函数.md" class="" aria-label="深入理解函数"><!--[--><!--]--> 深入理解函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/闭包.md" class="" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件对象.md" class="" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件流.md" class="" aria-label="深入理解事件流"><!--[--><!--]--> 深入理解事件流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/展开语法.md" class="" aria-label="展开语法"><!--[--><!--]--> 展开语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/数组.md" class="" aria-label="Array数组"><!--[--><!--]--> Array数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/二维数组.md" class="" aria-label="二维数组"><!--[--><!--]--> 二维数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/重绘与回流.md" class="" aria-label="重绘与回流"><!--[--><!--]--> 重绘与回流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/DOM节点.md" class="" aria-label="DOM节点"><!--[--><!--]--> DOM节点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JaveScript_object.md" class="" aria-label="对象Object"><!--[--><!--]--> 对象Object <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript控制结构.md" class="" aria-label="控制结构"><!--[--><!--]--> 控制结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript隐式转换.md" class="" aria-label="隐式转换"><!--[--><!--]--> 隐式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript显式转换.md" class="" aria-label="显式转换"><!--[--><!--]--> 显式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/解构赋值.md" class="" aria-label="解构赋值"><!--[--><!--]--> 解构赋值 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/data-自定义属性.md" class="" aria-label="data-自定义属性"><!--[--><!--]--> data-自定义属性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/git/Git.md" class="" aria-label="Git分布式版本控制"><!--[--><!--]--> Git分布式版本控制 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">React <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#the-road-to-learn-react" class="router-link-active router-link-exact-active sidebar-item" aria-label="the-road-to-learn-react"><!--[--><!--]--> the-road-to-learn-react <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#react-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#jsx" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSX"><!--[--><!--]--> JSX <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#jsx到底是什么" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSX到底是什么?"><!--[--><!--]--> JSX到底是什么? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#在-jsx-中嵌入表达式" class="router-link-active router-link-exact-active sidebar-item" aria-label="在 JSX 中嵌入表达式"><!--[--><!--]--> 在 JSX 中嵌入表达式 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#将一个元素渲染为-dom" class="router-link-active router-link-exact-active sidebar-item" aria-label="将一个元素渲染为 DOM"><!--[--><!--]--> 将一个元素渲染为 DOM <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#_17version" class="router-link-active router-link-exact-active sidebar-item" aria-label="17version"><!--[--><!--]--> 17version <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#_18version" class="router-link-active router-link-exact-active sidebar-item" aria-label="18version"><!--[--><!--]--> 18version <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#深入jsx-语法糖" class="router-link-active router-link-exact-active sidebar-item" aria-label="深入JSX-语法糖"><!--[--><!--]--> 深入JSX-语法糖 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#函数组件与-class-组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="函数组件与 class 组件"><!--[--><!--]--> 函数组件与 class 组件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#渲染函数组件-无状态高性能" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染函数组件(无状态高性能)"><!--[--><!--]--> 渲染函数组件(无状态高性能) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#渲染多个组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="渲染多个组件"><!--[--><!--]--> 渲染多个组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#class组件-有状态" class="router-link-active router-link-exact-active sidebar-item" aria-label="class组件(有状态)"><!--[--><!--]--> class组件(有状态) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#class组件的状态state" class="router-link-active router-link-exact-active sidebar-item" aria-label="class组件的状态state"><!--[--><!--]--> class组件的状态state <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#props接收数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="props接收数据"><!--[--><!--]--> props接收数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#单向数据流" class="router-link-active router-link-exact-active sidebar-item" aria-label="单向数据流"><!--[--><!--]--> 单向数据流 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#组件通讯" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件通讯"><!--[--><!--]--> 组件通讯 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#父到子" class="router-link-active router-link-exact-active sidebar-item" aria-label="父到子"><!--[--><!--]--> 父到子 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#子到父" class="router-link-active router-link-exact-active sidebar-item" aria-label="子到父"><!--[--><!--]--> 子到父 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#react核心思想-状态不可变" class="router-link-active router-link-exact-active sidebar-item" aria-label="React核心思想:状态不可变"><!--[--><!--]--> React核心思想:状态不可变 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#this-setstate修改状态的唯一方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="this.setState修改状态的唯一方式"><!--[--><!--]--> this.setState修改状态的唯一方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#state注意事项" class="router-link-active router-link-exact-active sidebar-item" aria-label="state注意事项"><!--[--><!--]--> state注意事项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#setstate" class="router-link-active router-link-exact-active sidebar-item" aria-label="setState"><!--[--><!--]--> setState <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#react核心思想-状态管理与进阶" class="router-link-active router-link-exact-active sidebar-item" aria-label="React核心思想:状态管理与进阶"><!--[--><!--]--> React核心思想:状态管理与进阶 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#状态提升" class="router-link-active router-link-exact-active sidebar-item" aria-label="状态提升"><!--[--><!--]--> 状态提升 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#再探setstate" class="router-link-active router-link-exact-active sidebar-item" aria-label="再探setState"><!--[--><!--]--> 再探setState <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#驾驭state" class="router-link-active router-link-exact-active sidebar-item" aria-label="驾驭State"><!--[--><!--]--> 驾驭State <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="事件"><!--[--><!--]--> 事件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#受控组件-表单" class="router-link-active router-link-exact-active sidebar-item" aria-label="受控组件-表单"><!--[--><!--]--> 受控组件-表单 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#onchange" class="router-link-active router-link-exact-active sidebar-item" aria-label="onChange"><!--[--><!--]--> onChange <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#非受控组件-ref" class="router-link-active router-link-exact-active sidebar-item" aria-label="非受控组件-ref"><!--[--><!--]--> 非受控组件-ref <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#hooks" class="router-link-active router-link-exact-active sidebar-item" aria-label="Hooks"><!--[--><!--]--> Hooks <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/react/React.html#为什么要有-hooks" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么要有 Hooks"><!--[--><!--]--> 为什么要有 Hooks <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#hooks渐进策略" class="router-link-active router-link-exact-active sidebar-item" aria-label="hooks渐进策略"><!--[--><!--]--> hooks渐进策略 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#usestate-基本使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="useState-基本使用"><!--[--><!--]--> useState-基本使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#usestate的读取和使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="useState的读取和使用"><!--[--><!--]--> useState的读取和使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#useeffect-副作用介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="useEffect 副作用介绍"><!--[--><!--]--> useEffect 副作用介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#useeffect-基本使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="useEffect-基本使用"><!--[--><!--]--> useEffect-基本使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#useeffect第二个参数" class="router-link-active router-link-exact-active sidebar-item" aria-label="useEffect第二个参数"><!--[--><!--]--> useEffect第二个参数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#第二个参数是一个空数组" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二个参数是一个空数组"><!--[--><!--]--> 第二个参数是一个空数组 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/react/React.html#useeffect发送请求" class="router-link-active router-link-exact-active sidebar-item" aria-label="useEffect发送请求"><!--[--><!--]--> useEffect发送请求 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/react/React.html#购物车案例" class="router-link-active router-link-exact-active sidebar-item" aria-label="购物车案例"><!--[--><!--]--> 购物车案例 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="react" tabindex="-1"><a class="header-anchor" href="#react" aria-hidden="true">#</a> React</h1><h2 id="the-road-to-learn-react" tabindex="-1"><a class="header-anchor" href="#the-road-to-learn-react" aria-hidden="true">#</a> the-road-to-learn-react</h2><p>我在<a href="https://github.com/TimSpan/the-road-to-learn-react-bookPDF" target="_blank" rel="noopener noreferrer">github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>上传了这本书</p><h2 id="react-1" tabindex="-1"><a class="header-anchor" href="#react-1" aria-hidden="true">#</a> React</h2><p>React 并不是一个 SPA 框架，而是一个视图库。也就 是 MVC28（Model View Controller，模型-视图-控制器.能仅仅是把组件渲染 成浏览器中的可见元素.但是，围绕 React 周边的整个生态系统让构建单页面应用成为可能。其他的第一代框架尝试一次性 解决很多问题，而 React 仅仅帮助你构建视图层。它更多的是一个库而非框架。其背后的 思路是：应用的视图应该是一系列层次分明的可组合的组件。</p><h2 id="jsx" tabindex="-1"><a class="header-anchor" href="#jsx" aria-hidden="true">#</a> JSX</h2><h3 id="jsx到底是什么" tabindex="-1"><a class="header-anchor" href="#jsx到底是什么" aria-hidden="true">#</a> JSX到底是什么?</h3><p>JSX是一种JavaScript的语法扩展，首先在<a href="https://baike.baidu.com/item/React/18077599" target="_blank" rel="noopener noreferrer">React<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>中被进入，其格式比较像是模版语言，但事实上完全是在<a href="https://baike.baidu.com/item/JavaScript/321142" target="_blank" rel="noopener noreferrer">JavaScript<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>内部实现的。元素是构成React应用的最小单位，JSX就是用来声明React当中的元素。React主要使用JSX来描述用户界面，但React并不强制要求使用JSX [1] ，而JSX也在React之外的框架得到了广泛的支持，包括Vue.js [3] ，Solid [2] 等。</p><h3 id="在-jsx-中嵌入表达式" tabindex="-1"><a class="header-anchor" href="#在-jsx-中嵌入表达式" aria-hidden="true">#</a> 在 JSX 中嵌入表达式</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&#39;Josh Perez&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>在 JSX 语法中，你可以在大括号内放置任何有效的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators#Expressions" target="_blank" rel="noopener noreferrer">JavaScript 表达式<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>示例:调用 JavaScript 函数 <code>formatName(user)</code> 的结果，并将结果嵌入到 <code>&lt;h1&gt;</code> 元素中。</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">formatName</span><span class="token punctuation">(</span><span class="token parameter">user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> user<span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&#39; &#39;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&#39;Harper&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&#39;Perez&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
        Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token function">formatName</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">!</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Hello, Harper Perez!</span>
</code></pre></div><h2 id="将一个元素渲染为-dom" tabindex="-1"><a class="header-anchor" href="#将一个元素渲染为-dom" aria-hidden="true">#</a> 将一个元素渲染为 DOM</h2><h3 id="_17version" tabindex="-1"><a class="header-anchor" href="#_17version" aria-hidden="true">#</a> 17version</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom&#39;</span>
<span class="token keyword">const</span> title <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_18version" tabindex="-1"><a class="header-anchor" href="#_18version" aria-hidden="true">#</a> 18version</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./app&#39;</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="深入jsx-语法糖" tabindex="-1"><a class="header-anchor" href="#深入jsx-语法糖" aria-hidden="true">#</a> 深入JSX-语法糖</h3><p>实际上，JSX 仅仅只是 <code>React.createElement(component, props, ...children)</code> 函数的语法糖。比如上面的 JSX 代码：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token comment">//会编译为</span>
React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;h1&#39;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&#39;hello world&#39;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="函数组件与-class-组件" tabindex="-1"><a class="header-anchor" href="#函数组件与-class-组件" aria-hidden="true">#</a> 函数组件与 class 组件</h2><h3 id="渲染函数组件-无状态高性能" tabindex="-1"><a class="header-anchor" href="#渲染函数组件-无状态高性能" aria-hidden="true">#</a> 渲染函数组件(无状态高性能)</h3><p>定义组件最简单的方式就是编写 JavaScript 函数：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">//之前我们遇到的 React 元素都只是 DOM 标签：</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>div <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//不过，React 元素也可以是用户自定义的组件：</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//当 React 元素为用户自定义组件时，它会将 JSX 所接收的属性（attributes）以及子组件（children）转换为单个对象传递给组件，这个对象被称之为 “props”。</span>

<span class="token comment">//下面这个函数是一个有效的 React 组件，因为它接收唯一带有数据的 “props”（代表属性）对象与并返回一个 React 元素。</span>
<span class="token comment">//这类组件被称为“函数组件”，因为它本质上就是 JavaScript 函数。</span>
<span class="token comment">//函数组件</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//函数组件必须有返回值，表示该组件的 UI 结构</span>
    <span class="token comment">//如果不需要渲染任何内容，则返回 null</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token comment">//渲染组件</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//使用组件//Hello, Sara</span>

<span class="token comment">//当然你可以这样去渲染一个组件</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//Hello, Sara//效果是一样的</span>

<span class="token comment">//组件就像HTML标签一样可以被渲染到页面中。组件表示的是一段结构内容</span>
<span class="token comment">//对于函数组件来说，函数返回值的内容就是渲染的内容</span>

<span class="token comment">//也可以使用双标签渲染元素</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Welcome<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>让我们来看看这个函数组件渲染是怎么执行的:</p><ol><li>我们调用 <code>root.render()</code> 函数，并传入 <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> 作为参数。</li><li>React 调用 <code>Welcome</code> 组件，并将 <code>{name: &#39;Sara&#39;}</code> 作为 props 传入。</li><li><code>Welcome</code> 组件将 <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> 元素作为返回值。</li><li>React DOM 将 DOM 高效地更新为 <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>。</li></ol><div class="custom-container tip"><p class="custom-container-title">组件名称必须以大写字母开头</p><p>React 会将以小写字母开头的组件视为原生 DOM 标签。例如，<code>&lt;div /&gt;</code> 代表 HTML 的 div 标签，而 <code>&lt;Welcome /&gt;</code> 则代表一个组件，并且需在作用域内使用 <code>Welcome</code>。</p><ol><li>函数组件无状态(state),静态,不会发生变化(不考虑hooks的情况下)</li><li>不能自己提供数据</li></ol></div><h3 id="渲染多个组件" tabindex="-1"><a class="header-anchor" href="#渲染多个组件" aria-hidden="true">#</a> 渲染多个组件</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> Hello <span class="token keyword">from</span> <span class="token string">&#39;./hello.js&#39;</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">&#39;./home.js&#39;</span>
<span class="token comment">//类组件</span>
<span class="token comment">// import React from &quot;react&quot;;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Hello <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span>

<span class="token comment">//hello.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello 你好<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Hello
<span class="token comment">//home.js</span>
<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>这是首页<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> Home
</code></pre></div><h3 id="class组件-有状态" tabindex="-1"><a class="header-anchor" href="#class组件-有状态" aria-hidden="true">#</a> class组件(有状态)</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">//你同时还可以使用 ES6 的 class来定义组件：</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义ES6 class组件</span>
<span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">&quot;Sara&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>

<span class="token number">1.</span> 类组件应该继承 <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">React.Component</span><span class="token template-punctuation string">`</span></span> 父类，从而使用父类中提供的方法或属性
<span class="token number">2.</span> 类组件必须提供 render 方法
<span class="token number">3.</span> render 方法必须有返回值，表示该组件的 <span class="token constant">UI</span> 结构
<span class="token number">4.</span> 状态（state）是组件的私有数据

<span class="token comment">//也可以单独引入Component</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><h3 id="class组件的状态state" tabindex="-1"><a class="header-anchor" href="#class组件的状态state" aria-hidden="true">#</a> class组件的状态state</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
<span class="token comment">// 为组件提供状态</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
<span class="token comment">//从语法层面看state就是类的实例属性</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">isLoading</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// Welcome</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token comment">// this就是当前类的实例对象</span>
            <span class="token comment">// 交给了react,react内部回去 new 一下</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>计数器：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="props接收数据" tabindex="-1"><a class="header-anchor" href="#props接收数据" aria-hidden="true">#</a> props接收数据</h2><p>函数组件:<code>props</code>接收数据</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// props 的值就是：{ name: &#39;jack&#39;, age: 19 }</span>
<span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//props接收数据</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我叫<span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>今年<span class="token punctuation">{</span> props<span class="token punctuation">.</span>age<span class="token punctuation">}</span>岁<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传递数据</span>
<span class="token comment">//输出:我叫jack今年19岁</span>

</code></pre></div><p>class组件: <code>this.props</code>接收数据</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// props 的值就是：{ name: &#39;jack&#39;, age: 19 }</span>
<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>我叫<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span>今年<span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>age<span class="token punctuation">}</span>岁<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Hello name<span class="token operator">=</span><span class="token string">&quot;jack&quot;</span> age<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//传递数据</span>
<span class="token comment">//输出:我叫jack今年19岁</span>
</code></pre></div><h2 id="单向数据流" tabindex="-1"><a class="header-anchor" href="#单向数据流" aria-hidden="true">#</a> 单向数据流</h2><div class="custom-container tip"><p class="custom-container-title">TIP</p><ol><li><strong>props 是只读对象</strong>，也就是说：只能读取对象中的属性，无法修改</li><li><strong>单向数据流</strong>，也叫做：自顶而下（自上而下）的数据流</li><li>父组件中的数据可以通过 props 传递给子组件，并且，当父组件中的数据更新时，子组件就会自动接收到最新的数据</li><li>类比：就像瀑布的水一样只能从上往下流动，并且，当上游的水变浑浊，下游的水也会受到影响</li><li>可以传递任意数据（数字 字符串 布尔类型 数组 对象 函数 jsx）</li></ol></div><h2 id="组件通讯" tabindex="-1"><a class="header-anchor" href="#组件通讯" aria-hidden="true">#</a> 组件通讯</h2><h3 id="父到子" tabindex="-1"><a class="header-anchor" href="#父到子" aria-hidden="true">#</a> 父到子</h3><p><strong>步骤</strong>：</p><ol><li><p>父组件提供要传递的state数据</p></li><li><p>给子组件标签添加属性，值为 state 中的数据</p></li><li><p>子组件中通过 props 接收父组件中传递的数据</p></li></ol><p><strong>核心代码</strong></p><p>父组件提供数据并且传递给子组件</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">money</span><span class="token operator">:</span> <span class="token number">10000</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> money <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是父组件：</span><span class="token punctuation">{</span>money<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span><span class="token comment">/* 将数据传递给子组件 */</span><span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">money</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>money<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>子组件接收数据</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token comment">/* 接收父组件中传递过来的数据 */</span><span class="token punctuation">}</span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我是子组件 -- </span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>money<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="子到父" tabindex="-1"><a class="header-anchor" href="#子到父" aria-hidden="true">#</a> 子到父</h3><p>思路和vue是一样,只不过没有vue那些语法,很直接</p><div class="language-text ext-text"><pre class="language-text"><code>
</code></pre></div><h2 id="react核心思想-状态不可变" tabindex="-1"><a class="header-anchor" href="#react核心思想-状态不可变" aria-hidden="true">#</a> React核心思想:状态不可变</h2><div class="custom-container tip"><p class="custom-container-title">注意</p><p><em><strong>状态不可变并不是指的状态不能变,而是不要直接修改状态的值，是基于当前状态创建新的状态值</strong></em></p><p><strong>状态不可变也可以叫单向数据流</strong></p></div><p><strong>不要直接修改 State</strong>.<strong>而是应该使用</strong> <code>setState()</code>.<strong>构造函数是唯一可以给 <code>this.state</code> 赋值的地方。</strong></p><h3 id="this-setstate修改状态的唯一方式" tabindex="-1"><a class="header-anchor" href="#this-setstate修改状态的唯一方式" aria-hidden="true">#</a> this.setState修改状态的唯一方式</h3><p>react唯一修改状态的方式就是<code>this.setState</code></p><ul><li>思想：<strong>数据驱动视图</strong>，也就是只需要修改数据（状态）那么页面（视图）就会自动刷新 <ul><li>核心：数据！！！</li><li>从现在开始，我们关心的是如何修改数据，而不再是关心如何修改DOM</li><li>并且，注意：尽量避免直接手动 DOM（通过 document.querySelector() 获取到到DOM对象然后再操作） 操作！！！</li></ul></li><li>注意：<em>不要直接修改 state 中的值，这是无效的</em>！</li></ul><h3 id="state注意事项" tabindex="-1"><a class="header-anchor" href="#state注意事项" aria-hidden="true">#</a> state注意事项</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code>state <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jack&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 【不推荐】直接修改当前值的操作：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span>

<span class="token comment">// 只要是数组中直接修改当前数组的方法都不能用！</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;rose&#39;</span>

<span class="token comment">// 【推荐】不是直接修改当前值，而是创建新值的操作：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">list</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">person</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>person<span class="token punctuation">,</span>
    <span class="token comment">// 要修改的属性，会覆盖原来的属性，这样，就可以达到修改对象中属性的目的了</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;rose&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="setstate" tabindex="-1"><a class="header-anchor" href="#setstate" aria-hidden="true">#</a> setState</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// import &#39;./index.css&#39;</span>
<span class="token comment">// import Comments from &#39;./Comments.js&#39;</span>
<span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;React&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;https://facebook.github.io/react/&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">&#39;Jordan Walke&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">num_comments</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token literal-property property">points</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token literal-property property">objectID</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">list</span><span class="token operator">:</span> list<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onDismiss <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onDismiss</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">onDismiss</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">isNotId</span> <span class="token operator">=</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>objectID <span class="token operator">!==</span> id<span class="token punctuation">;</span>
    <span class="token keyword">const</span> updatedList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>isNotId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">list</span><span class="token operator">:</span> updatedList <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
          <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>objectID<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>url<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>author<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>num_comments<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>points<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>button
                onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onDismiss</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>objectID<span class="token punctuation">)</span><span class="token punctuation">}</span>
                type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span>
              <span class="token operator">&gt;</span>
                Dismiss
              <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="react核心思想-状态管理与进阶" tabindex="-1"><a class="header-anchor" href="#react核心思想-状态管理与进阶" aria-hidden="true">#</a> React核心思想:状态管理与进阶</h2><h3 id="状态提升" tabindex="-1"><a class="header-anchor" href="#状态提升" aria-hidden="true">#</a> 状态提升</h3><h3 id="再探setstate" tabindex="-1"><a class="header-anchor" href="#再探setstate" aria-hidden="true">#</a> 再探setState</h3><h3 id="驾驭state" tabindex="-1"><a class="header-anchor" href="#驾驭state" aria-hidden="true">#</a> 驾驭State</h3><h2 id="事件" tabindex="-1"><a class="header-anchor" href="#事件" aria-hidden="true">#</a> 事件</h2><p>JSX中最好不要包含太多的逻辑,可以抽离到单独的函数中</p><h2 id="受控组件-表单" tabindex="-1"><a class="header-anchor" href="#受控组件-表单" aria-hidden="true">#</a> 受控组件-表单</h2><p>受控组件：<strong>value值受到了react状态控制的表单元素</strong></p><h3 id="onchange" tabindex="-1"><a class="header-anchor" href="#onchange" aria-hidden="true">#</a> onChange</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&#39;react-dom/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello react&#39;</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">handleChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">msg</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token comment">//最新值</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input
                    type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
                    value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>msg<span class="token punctuation">}</span>
                    onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token comment">//关键</span>
                <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
<span class="token comment">//表单value的更新过程:</span>
<span class="token number">1.</span> 在文本框输入内容后<span class="token punctuation">,</span>会触发文本框的onChange事件
<span class="token number">2.</span> onChange事件触发<span class="token punctuation">,</span>handleChange中的代码执行
<span class="token number">3.</span> <span class="token function">handleChange执行后拿到文本框最新的值</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token number">4.</span> 将最新的文本框值交给了setState <span class="token punctuation">,</span>setState更新了状态
<span class="token number">5.</span> 调用setState后状态会更新<span class="token punctuation">,</span>同时<span class="token punctuation">,</span>组件会重新渲染<span class="token punctuation">,</span>会重新调用render
<span class="token number">6.</span> render重新调用就拿到了文本框最新的值<span class="token punctuation">,</span>并且把最新的文本框值渲染到页面上
<span class="token number">7.</span> 此时<span class="token punctuation">,</span>就看到文本框变化了        
</code></pre></div><h3 id="非受控组件-ref" tabindex="-1"><a class="header-anchor" href="#非受控组件-ref" aria-hidden="true">#</a> 非受控组件-ref</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 1 导入 createRef 函数（ 用来创建 ref 对象 ）</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRef<span class="token punctuation">,</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>
<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
<span class="token comment">//调用 createRef 函数来创建一个 ref 对象</span>
<span class="token comment">//ref 对象的名称（txtRef）可以是任意值</span>
<span class="token comment">//命名要规范： txt（DOM 元素的自己标识） + Ref</span>
    txtRef <span class="token operator">=</span> <span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 文本框对应的 DOM 元素</span>
        <span class="token comment">// console.log(this.txtRef.current)</span>

        <span class="token comment">// 4 获取文本框的值：</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>获取文本框的值<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
        <span class="token comment">//将创建好的 ref 对象，设置为 input 标签的 ref 属性值</span>
        <span class="token comment">//作用：将 ref 和 input DOM 绑定到一起，将来在通过 this.txtRef 拿到的就是当前 DOM 对象</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意:</strong></p><ol><li>ref是个对象,对象中有一个current属性</li><li>current属性的值才是DOM对象</li></ol><p><strong>打印结果:</strong></p><div class="language-javascript ext-js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt=""></p><div class="language-javascript ext-js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>txtRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt=""></p><blockquote><p><strong>尽量避免使用这种方式</strong></p></blockquote><p><strong>非受控组件借助ref,使用原生DOM的方式来获取表单元素的值</strong></p><ul><li>非受控组件通过React组件的状态来控制表单元素的值</li><li>手动操作DOM来控制</li><li>ref: 用来在React中获取DOM元素</li></ul><p><strong>何时使用 Refs:</strong></p><ul><li>管理焦点，文本选择或媒体播放。</li><li>触发强制动画。</li><li>集成第三方 DOM 库。</li></ul><h2 id="hooks" tabindex="-1"><a class="header-anchor" href="#hooks" aria-hidden="true">#</a> Hooks</h2><p><a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">hooks官网文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>hook指的就是一个特殊的函数</strong> <strong>以use开头</strong></p><p>为<strong>函数组件</strong>提供状态、生命周期等原本 class 组件中提供的 React 功能</p><ul><li>可以理解为通过 Hooks 为函数组件钩入 class 组件的特性</li></ul><p>::: tip注意</p><p>Hooks 只能在函数组件中使用，自此，函数组件成为 React 的新宠儿</p><p>:::</p><h3 id="为什么要有-hooks" tabindex="-1"><a class="header-anchor" href="#为什么要有-hooks" aria-hidden="true">#</a> 为什么要有 Hooks</h3><p>两个角度：1 组件的状态逻辑复用 2 class 组件自身的问题</p><ol><li><p>组件的状态逻辑复用：</p><ul><li>在 Hooks 之前，组件的状态逻辑复用经历了：mixins（混入）、HOCs（高阶组件）、render-props 等模式</li><li>（早已废弃）mixins 的问题：1 数据来源不清晰 2 命名冲突</li><li>HOCs、render-props 的问题：重构组件结构，导致组件形成 JSX 嵌套地狱问题</li></ul></li><li><p>class 组件自身的问题：</p><ul><li>选择：函数组件和 class 组件之间的区别以及使用哪种组件更合适</li><li>需要理解 class 中的 this 是如何工作的,有了箭头函数后好很多</li><li>相互关联且需要对照修改的代码被拆分到不同生命周期函数中</li></ul></li></ol><ul><li>相比于函数组件来说，不利于代码压缩和优化，也不利于 TS 的类型推导</li></ul><p>Hooks 来解决这些问题</p><h3 id="hooks渐进策略" tabindex="-1"><a class="header-anchor" href="#hooks渐进策略" aria-hidden="true">#</a> hooks渐进策略</h3><ul><li>react没有计划从React中移除 class <a href="https://zh-hans.reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>Hooks 和现有代码可以同时工作，你可以渐进式地使用他们 <ul><li>不推荐直接使用 Hooks 大规模重构现有组件</li><li>推荐：新功能用 Hooks，复杂功能实现不了的，也可以继续用 class</li><li>找一个功能简单、非核心功能的组件开始使用 hooks</li></ul></li><li>之前的react语法并不是以后就不用了 <ul><li>class 组件相关的 API 在hooks中可以不用 <ul><li>class 自身语法，比如，constructor、static 等</li><li>钩子函数，<code>componentDidMount</code>、<code>componentDidUpdate</code>、<code>componentWillUnmount</code></li><li><code>this</code> 相关的用法</li></ul></li><li><strong>原来的 React 内容还是要用的</strong><ul><li>JSX：<code>{}</code>、<code>onClick={handleClick}</code>、条件渲染、列表渲染、样式处理等</li><li>组件：函数组件、组件通讯</li><li>React 开发理念：<code>单向数据流</code>、<code>状态提升</code> 等</li><li>解决问题的思路、技巧、常见错误的分析等</li></ul></li></ul></li></ul><p><strong>总结</strong>：</p><ol><li>react没有计划从React中移除class</li><li>react将继续为 class 组件提供支持</li><li>可以在项目中同时使用hooks和class</li></ol><h3 id="usestate-基本使用" tabindex="-1"><a class="header-anchor" href="#usestate-基本使用" aria-hidden="true">#</a> useState-基本使用</h3><p><strong>hook指的就是一个特殊的函数</strong> <strong>以use开头</strong></p><div class="custom-container tip"><p class="custom-container-title">注意</p><p>参数0指定状态state初始值,如果没有初始状态,state为undefined,去修改state会变成NaN</p><p>打印出来这是一个数组</p><p>索引 0 为state状态值</p><p>索引 1 表示：修改状态的函数（setState）</p></div><div class="custom-container tip"><p class="custom-container-title">注意</p><p>useState hook 的参数可以是任意值</p></div><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//数组解构</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* 展示状态值 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>You clicked <span class="token punctuation">{</span>count<span class="token punctuation">}</span> times<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* 点击按钮，让状态值 +1 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Click me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Example <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>setCount 的打印结果</p><div class="language-text ext-text"><pre class="language-text"><code>ƒ dispatchSetState(fiber, queue, action) {
      {
        if (typeof arguments[3] === &#39;function&#39;) {
          error(&quot;State updates from the useState() and useReducer() Hooks don&#39;t support the &quot; + &#39;sec…
</code></pre></div><p>也可以这样写 就一个解构的区别:</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Count</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  
  <span class="token keyword">const</span> stateArray <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> state <span class="token operator">=</span> stateArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> setState <span class="token operator">=</span> stateArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>状态为：<span class="token punctuation">{</span>state<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>来看下上面这个useState组件的更新过程</p><ul><li><p>组件第一次渲染：</p><ol><li>从头开始执行该组件中的代码逻辑</li><li>调用 <code>useState(0)</code> 将传入的参数作为状态初始值，即：0</li><li>渲染组件，此时，获取到的状态 count 值为： 0</li></ol></li><li><p>组件第二次渲染：</p><ol><li>点击按钮，调用 <code>setCount(count + 1)</code> 修改状态，因为状态发生改变，所以，该组件会重新渲染</li><li>组件重新渲染时，会再次执行该组件中的代码逻辑</li><li>再次调用 <code>useState(0)</code>，此时 <strong>React 内部会拿到最新的状态值而非初始值</strong>，比如，该案例中最新的状态值为 1</li><li>再次渲染组件，此时，获取到的状态 count 值为：1</li></ol></li></ul><p>注意：<strong>useState 的初始值(参数)只会在组件第一次渲染时生效</strong>。</p><p>也就是说，以后的每次渲染，useState 获取到都是最新的状态值。React 组件会记住每次最新的状态值！</p><h3 id="usestate的读取和使用" tabindex="-1"><a class="header-anchor" href="#usestate的读取和使用" aria-hidden="true">#</a> useState的读取和使用</h3><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//Counter组件</span>
<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//初始值为一个对象</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>user<span class="token punctuation">,</span> setUser<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;jack&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//新的状态值会覆盖原来的值</span>
      <span class="token operator">...</span>user<span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> user<span class="token punctuation">.</span>age<span class="token operator">+</span><span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>姓名：<span class="token punctuation">{</span>user<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{</span>user<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span> <span class="token operator">&gt;</span> 修改年龄 <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="useeffect-副作用介绍" tabindex="-1"><a class="header-anchor" href="#useeffect-副作用介绍" aria-hidden="true">#</a> useEffect 副作用介绍</h3><p><code>side effect</code>：副作用</p><p>使用场景：当你想要在函数组件中，<strong>处理副作用（side effect）时</strong>，就要使用 <strong>useEffect</strong> Hook 了 作用：<strong>处理函数组件中的副作用（side effect）</strong></p><p>问题：副作用（side effect）是什么? 回答：在计算机科学中，如果一个函数或其他操作修改了其局部环境之外的状态变量值，那么它就被称为有副作用 类比，对于 999 感冒灵感冒药来说：</p><ul><li>（主）作用：用于感冒引起的头痛，发热，鼻塞，流涕，咽痛等</li><li>副作用：可见困倦、嗜睡、口渴、虚弱感</li></ul><p>理解：副作用是相对于主作用来说的，一个功能（比如，函数）除了主作用，其他的作用就是副作用 对于 React 组件来说，<strong>主作用就是根据数据（state/props）渲染 UI</strong>，除此之外都是副作用（比如，手动修改 DOM）</p><p>常见的副作用（side effect）：数据（Ajax）请求、手动修改 DOM、localStorage、console.log 操作等</p><p><strong>总结</strong>：</p><p>​ 对于react组件来说，除了渲染UI之外的其他操作，都可以称之为副作用</p><h3 id="useeffect-基本使用" tabindex="-1"><a class="header-anchor" href="#useeffect-基本使用" aria-hidden="true">#</a> useEffect-基本使用</h3><p>**目标：**能够在函数组件中操作DOM（处理副作用）</p><p><strong>内容：</strong></p><p>使用场景：当你想要在函数组件中，处理副作用（side effect）时就要使用 useEffect Hook 了</p><p>作用：处理函数组件中的一些副作用（side effect）</p><p>注意：在实际开发中，副作用是不可避免的。因此，react 专门提供了 <strong>useEffect</strong> Hook <strong>来处理函数组件中的副作用</strong></p><p>语法：</p><ul><li><strong>参数</strong>：<strong>回调函数</strong>（称为 <strong>effect</strong>），就是<strong>在该函数中写副作用代码</strong></li><li>执行时机：该 effect 会在组件第一次渲染以及每次组件更新后执行</li><li>相当于 componentDidMount + componentDidUpdate</li></ul><p>先调用useEffect( )函数</p><div class="language-text ext-text"><pre class="language-text"><code>useEffect( )
</code></pre></div><p>useEffect ( 参数) 参数是个回调函数</p><p>第一个参数就是effect函数</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">effect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前已点击 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 次</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>当然也可以写箭头函数</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前已点击 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 次</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>示例：</p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span>

<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前已点击 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 次</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">计数器：</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="useeffect第二个参数" tabindex="-1"><a class="header-anchor" href="#useeffect第二个参数" aria-hidden="true">#</a> useEffect第二个参数</h3><p><em><strong>第二个参数相当于vue中的 watch监听</strong></em></p><p>**目标：**能够设置 useEffect 的依赖只在 count 变化时执行相应的 effect</p><p><strong>内容：</strong></p><ul><li><p>问题：如果组件中有另外一个状态，另一个状态更新时，刚刚的 effect 回调也会执行</p></li><li><p>默认情况：只要状态发生更新 useEffect 的 effect 回调就会执行</p></li><li><p>性能优化：<strong>跳过不必要的执行，只在 count 变化时，才执行相应的 effect</strong></p></li><li><p>语法：</p><ul><li>第二个参数：可选，也可以传一个数组，数组中的元素可以成为依赖项（deps）</li><li>该示例中表示：只有当 count 改变时，才会重新执行该 effect</li></ul></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前已点击 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 次</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>核心代码：</strong></p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">Counter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>loading<span class="token punctuation">,</span> setLoading<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;conut&#39;</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前已点击 </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> 次</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//跳过不必要的执行，只在 count 变化时，才执行相应的 effect</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>计数器：<span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span> <span class="token punctuation">{</span>loading<span class="token operator">?</span> <span class="token string">&#39;加载中&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;加载完成!&#39;</span> <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setLoading</span><span class="token punctuation">(</span><span class="token operator">!</span>loading<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>切换 loading<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="第二个参数是一个空数组" tabindex="-1"><a class="header-anchor" href="#第二个参数是一个空数组" aria-hidden="true">#</a> 第二个参数是一个空数组</h3><p>**目标：**能够设置useEffect的依赖，让组件只有在第一次渲染后会执行</p><p><strong>内容</strong>：</p><ul><li><p>useEffect 的第二个参数，还可以是一个<strong>空数组（[]）</strong>，表示只在组件第一次渲染后执行 effect</p></li><li><p>使用场景：1 事件绑定 2 发送请求获取数据 等</p></li><li><p>语法：</p><ul><li>该 effect 只会在组件第一次渲染后执行，因此，可以执行像事件绑定等只需要执行一次的操作</li><li>此时，相当于 class 组件的 componentDidMount 钩子函数的作用</li></ul></li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handleResize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;resize&#39;</span><span class="token punctuation">,</span> handleResize<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>注意：</p><ul><li>跟 useState Hook 一样，一个组件中也可以调用 useEffect Hook 多次</li><li>推荐：<strong>一个 useEffect 只处理一个功能，有多个功能时，使用多次 useEffect</strong></li></ul><h3 id="useeffect发送请求" tabindex="-1"><a class="header-anchor" href="#useeffect发送请求" aria-hidden="true">#</a> useEffect发送请求</h3><ul><li><p>在组件中，可以使用 useEffect Hook 来发送请求（side effect）获取数据</p></li><li><p>注意：<strong>effect 只能是一个同步函数，不能使用 async</strong></p><ul><li>因为如果 effect 是 async 的，此时返回值是 Promise 对象。这样的话，就无法保证清理函数被立即调用</li></ul></li><li><p>为了使用 async/await 语法，可以在 effect 内部创建 async 函数，并调用</p></li></ul><p><strong>核心代码：</strong></p><div class="language-jsx ext-jsx"><pre class="language-jsx"><code><span class="token comment">// 错误演示：不要给 effect 添加 async</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://xxx&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 正确使用</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">loadData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://xxx&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">loadData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="购物车案例" tabindex="-1"><a class="header-anchor" href="#购物车案例" aria-hidden="true">#</a> 购物车案例</h2></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: cat20201314@163.com">Kevin</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4409970e.js" defer></script>
  </body>
</html>
