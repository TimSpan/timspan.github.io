<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>小程序-04-自定义组件 | KBlog</title><meta name="description" content="KBlog">
    <link rel="modulepreload" href="/assets/app.4409970e.js"><link rel="modulepreload" href="/assets/wechat-04.html.df40bd68.js"><link rel="modulepreload" href="/assets/wechat-04.html.67e37bb7.js"><link rel="prefetch" href="/assets/index.html.9bd8fa5e.js"><link rel="prefetch" href="/assets/Git.html.5fd7768b.js"><link rel="prefetch" href="/assets/React.html.734ff348.js"><link rel="prefetch" href="/assets/React学习.html.dba41bb9.js"><link rel="prefetch" href="/assets/Vite_React构建项目.html.554c720e.js"><link rel="prefetch" href="/assets/class类.html.78dad533.js"><link rel="prefetch" href="/assets/data-自定义属性.html.bf9b733f.js"><link rel="prefetch" href="/assets/DOM节点.html.1e565be1.js"><link rel="prefetch" href="/assets/ES6.html.1f774e59.js"><link rel="prefetch" href="/assets/Function函数.html.9cf872e2.js"><link rel="prefetch" href="/assets/getElementsByClassName.html.89ae48d0.js"><link rel="prefetch" href="/assets/JavaScript控制结构.html.8cd64c62.js"><link rel="prefetch" href="/assets/JavaScript显式转换.html.10f05d5c.js"><link rel="prefetch" href="/assets/JavaScript隐式转换.html.b18369f4.js"><link rel="prefetch" href="/assets/JaveScript_object.html.0651c5d0.js"><link rel="prefetch" href="/assets/jQuery.html.3d2e856a.js"><link rel="prefetch" href="/assets/JS_Base.html.39172b24.js"><link rel="prefetch" href="/assets/JS执行机制.html.2b286877.js"><link rel="prefetch" href="/assets/Math.html.03dc3519.js"><link rel="prefetch" href="/assets/SPA.html.a8a7a7b3.js"><link rel="prefetch" href="/assets/事件对象.html.1467922b.js"><link rel="prefetch" href="/assets/事件流.html.ff5ced0d.js"><link rel="prefetch" href="/assets/二维数组.html.a4e05fc2.js"><link rel="prefetch" href="/assets/交集与并集选择器.html.5aa457c3.js"><link rel="prefetch" href="/assets/元素滚动事件.html.06083065.js"><link rel="prefetch" href="/assets/前端面试题.html.bc29ee23.js"><link rel="prefetch" href="/assets/展开语法.html.75e743fb.js"><link rel="prefetch" href="/assets/循环.html.a4c2d7f3.js"><link rel="prefetch" href="/assets/数组.html.bc6285f9.js"><link rel="prefetch" href="/assets/构造函数.html.96be9e3b.js"><link rel="prefetch" href="/assets/案例.html.f8ed8be5.js"><link rel="prefetch" href="/assets/解构赋值.html.8b4622f8.js"><link rel="prefetch" href="/assets/重绘与回流.html.c962a565.js"><link rel="prefetch" href="/assets/闭包.html.0263d4bf.js"><link rel="prefetch" href="/assets/Ajax.html.f33e4c8b.js"><link rel="prefetch" href="/assets/axios.html.92e1dfb3.js"><link rel="prefetch" href="/assets/es6模块化.html.940960f4.js"><link rel="prefetch" href="/assets/express.html.99377709.js"><link rel="prefetch" href="/assets/Promise.html.8ae266f3.js"><link rel="prefetch" href="/assets/npm使用手册.html.563456c5.js"><link rel="prefetch" href="/assets/npm命令发生的事.html.d0d96222.js"><link rel="prefetch" href="/assets/vite_vue3.html.4a1fb30e.js"><link rel="prefetch" href="/assets/Vite.html.78029b09.js"><link rel="prefetch" href="/assets/Vue-Router.html.692dab5c.js"><link rel="prefetch" href="/assets/Vue2第一章.html.369f8124.js"><link rel="prefetch" href="/assets/Vue2第三章_组件.html.20556b99.js"><link rel="prefetch" href="/assets/Vue2第二章.html.21ae0490.js"><link rel="prefetch" href="/assets/Vue3.html.16eb0162.js"><link rel="prefetch" href="/assets/Vue3和JSX.html.eb1e217f.js"><link rel="prefetch" href="/assets/vue3快速上手.html.8f4e9f72.js"><link rel="prefetch" href="/assets/VueCLI.html.87f70eb5.js"><link rel="prefetch" href="/assets/vuepress.html.a675a315.js"><link rel="prefetch" href="/assets/vuepressBuild部署.html.64283a07.js"><link rel="prefetch" href="/assets/wechat-01.html.85072e91.js"><link rel="prefetch" href="/assets/wechat-02.html.89038517.js"><link rel="prefetch" href="/assets/wechat-03.html.439de1dd.js"><link rel="prefetch" href="/assets/wechat-05.html.ebd0231c.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.cba4b748.js"><link rel="prefetch" href="/assets/Git.html.cdf1f0e6.js"><link rel="prefetch" href="/assets/React.html.075d6b93.js"><link rel="prefetch" href="/assets/React学习.html.97acd3ab.js"><link rel="prefetch" href="/assets/Vite_React构建项目.html.d731d69d.js"><link rel="prefetch" href="/assets/class类.html.6ee9203c.js"><link rel="prefetch" href="/assets/data-自定义属性.html.0f13eec3.js"><link rel="prefetch" href="/assets/DOM节点.html.3755bad6.js"><link rel="prefetch" href="/assets/ES6.html.fdf499c9.js"><link rel="prefetch" href="/assets/Function函数.html.5993ecb3.js"><link rel="prefetch" href="/assets/getElementsByClassName.html.31efea10.js"><link rel="prefetch" href="/assets/JavaScript控制结构.html.aedbecbe.js"><link rel="prefetch" href="/assets/JavaScript显式转换.html.9622e168.js"><link rel="prefetch" href="/assets/JavaScript隐式转换.html.ba57ac40.js"><link rel="prefetch" href="/assets/JaveScript_object.html.d41fd88f.js"><link rel="prefetch" href="/assets/jQuery.html.9b1a642d.js"><link rel="prefetch" href="/assets/JS_Base.html.9c30c146.js"><link rel="prefetch" href="/assets/JS执行机制.html.83181ec8.js"><link rel="prefetch" href="/assets/Math.html.21d0a79d.js"><link rel="prefetch" href="/assets/SPA.html.6da87a88.js"><link rel="prefetch" href="/assets/事件对象.html.8f261e40.js"><link rel="prefetch" href="/assets/事件流.html.8b8156f0.js"><link rel="prefetch" href="/assets/二维数组.html.655fd038.js"><link rel="prefetch" href="/assets/交集与并集选择器.html.2675df48.js"><link rel="prefetch" href="/assets/元素滚动事件.html.7b0c5faa.js"><link rel="prefetch" href="/assets/前端面试题.html.0a46543a.js"><link rel="prefetch" href="/assets/展开语法.html.9807030d.js"><link rel="prefetch" href="/assets/循环.html.685576be.js"><link rel="prefetch" href="/assets/数组.html.2284544a.js"><link rel="prefetch" href="/assets/构造函数.html.a6d6d86d.js"><link rel="prefetch" href="/assets/案例.html.ca71cea3.js"><link rel="prefetch" href="/assets/解构赋值.html.5d014b2e.js"><link rel="prefetch" href="/assets/重绘与回流.html.63e1ccf7.js"><link rel="prefetch" href="/assets/闭包.html.16232180.js"><link rel="prefetch" href="/assets/Ajax.html.150de746.js"><link rel="prefetch" href="/assets/axios.html.5754bbd8.js"><link rel="prefetch" href="/assets/es6模块化.html.400ecc97.js"><link rel="prefetch" href="/assets/express.html.524e0a4b.js"><link rel="prefetch" href="/assets/Promise.html.c60c3ba0.js"><link rel="prefetch" href="/assets/npm使用手册.html.8f43ea67.js"><link rel="prefetch" href="/assets/npm命令发生的事.html.3b0e82af.js"><link rel="prefetch" href="/assets/vite_vue3.html.731bda18.js"><link rel="prefetch" href="/assets/Vite.html.60c8cecd.js"><link rel="prefetch" href="/assets/Vue-Router.html.08c01d00.js"><link rel="prefetch" href="/assets/Vue2第一章.html.310b2aea.js"><link rel="prefetch" href="/assets/Vue2第三章_组件.html.40b7efb7.js"><link rel="prefetch" href="/assets/Vue2第二章.html.e8ba8a77.js"><link rel="prefetch" href="/assets/Vue3.html.c9642658.js"><link rel="prefetch" href="/assets/Vue3和JSX.html.758c694f.js"><link rel="prefetch" href="/assets/vue3快速上手.html.aa430504.js"><link rel="prefetch" href="/assets/VueCLI.html.b33a6056.js"><link rel="prefetch" href="/assets/vuepress.html.73b4e026.js"><link rel="prefetch" href="/assets/vuepressBuild部署.html.e532acb8.js"><link rel="prefetch" href="/assets/wechat-01.html.579db5b8.js"><link rel="prefetch" href="/assets/wechat-02.html.28064df4.js"><link rel="prefetch" href="/assets/wechat-03.html.c36d06ab.js"><link rel="prefetch" href="/assets/wechat-05.html.410a33c5.js"><link rel="prefetch" href="/assets/404.html.2f25284b.js"><link rel="prefetch" href="/assets/404.ff4e6462.js"><link rel="prefetch" href="/assets/Layout.9ea9cd68.js">
    <link rel="stylesheet" href="/assets/style.acf36ec1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">KBlog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/react/React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小程序"><span class="title">小程序</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小程序"><span class="title">小程序</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-01.md" class="" aria-label="小程序-01"><!--[--><!--]--> 小程序-01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-02.md" class="" aria-label="小程序-02"><!--[--><!--]--> 小程序-02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-03.md" class="" aria-label="小程序-03"><!--[--><!--]--> 小程序-03 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-04.md" class="" aria-label="小程序-04"><!--[--><!--]--> 小程序-04 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-05.md" class="" aria-label="小程序-05"><!--[--><!--]--> 小程序-05 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/node/node.md" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/Ajax.md" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm使用手册.md" class="" aria-label="npm使用手册"><!--[--><!--]--> npm使用手册 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm命令发生的事.md" class="" aria-label="npm命令发生了什么"><!--[--><!--]--> npm命令发生了什么 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/es6模块化.md" class="" aria-label="ES6模块化"><!--[--><!--]--> ES6模块化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/vue/vue3快速上手.md" class="" aria-label="Vue3快速上手"><!--[--><!--]--> Vue3快速上手 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/Vue-Router.md" class="" aria-label="Vue-Router3"><!--[--><!--]--> Vue-Router3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/vuepress.md" class="" aria-label="VuePress使用手册-V2.0"><!--[--><!--]--> VuePress使用手册-V2.0 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/js/构造函数.md" class="" aria-label="构造函数与原型以及class类"><!--[--><!--]--> 构造函数与原型以及class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/class类.md" class="" aria-label="class类"><!--[--><!--]--> class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/Function函数.md" class="" aria-label="深入理解函数"><!--[--><!--]--> 深入理解函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/闭包.md" class="" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件对象.md" class="" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件流.md" class="" aria-label="深入理解事件流"><!--[--><!--]--> 深入理解事件流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/展开语法.md" class="" aria-label="展开语法"><!--[--><!--]--> 展开语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/数组.md" class="" aria-label="Array数组"><!--[--><!--]--> Array数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/二维数组.md" class="" aria-label="二维数组"><!--[--><!--]--> 二维数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/重绘与回流.md" class="" aria-label="重绘与回流"><!--[--><!--]--> 重绘与回流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/DOM节点.md" class="" aria-label="DOM节点"><!--[--><!--]--> DOM节点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JaveScript_object.md" class="" aria-label="对象Object"><!--[--><!--]--> 对象Object <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript控制结构.md" class="" aria-label="控制结构"><!--[--><!--]--> 控制结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript隐式转换.md" class="" aria-label="隐式转换"><!--[--><!--]--> 隐式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript显式转换.md" class="" aria-label="显式转换"><!--[--><!--]--> 显式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/解构赋值.md" class="" aria-label="解构赋值"><!--[--><!--]--> 解构赋值 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/data-自定义属性.md" class="" aria-label="data-自定义属性"><!--[--><!--]--> data-自定义属性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/git/Git.md" class="" aria-label="Git分布式版本控制"><!--[--><!--]--> Git分布式版本控制 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/react/React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小程序"><span class="title">小程序</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小程序"><span class="title">小程序</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-01.md" class="" aria-label="小程序-01"><!--[--><!--]--> 小程序-01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-02.md" class="" aria-label="小程序-02"><!--[--><!--]--> 小程序-02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-03.md" class="" aria-label="小程序-03"><!--[--><!--]--> 小程序-03 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-04.md" class="" aria-label="小程序-04"><!--[--><!--]--> 小程序-04 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-05.md" class="" aria-label="小程序-05"><!--[--><!--]--> 小程序-05 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/node/node.md" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/Ajax.md" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm使用手册.md" class="" aria-label="npm使用手册"><!--[--><!--]--> npm使用手册 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm命令发生的事.md" class="" aria-label="npm命令发生了什么"><!--[--><!--]--> npm命令发生了什么 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/es6模块化.md" class="" aria-label="ES6模块化"><!--[--><!--]--> ES6模块化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/vue/vue3快速上手.md" class="" aria-label="Vue3快速上手"><!--[--><!--]--> Vue3快速上手 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/Vue-Router.md" class="" aria-label="Vue-Router3"><!--[--><!--]--> Vue-Router3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/vuepress.md" class="" aria-label="VuePress使用手册-V2.0"><!--[--><!--]--> VuePress使用手册-V2.0 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/js/构造函数.md" class="" aria-label="构造函数与原型以及class类"><!--[--><!--]--> 构造函数与原型以及class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/class类.md" class="" aria-label="class类"><!--[--><!--]--> class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/Function函数.md" class="" aria-label="深入理解函数"><!--[--><!--]--> 深入理解函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/闭包.md" class="" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件对象.md" class="" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件流.md" class="" aria-label="深入理解事件流"><!--[--><!--]--> 深入理解事件流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/展开语法.md" class="" aria-label="展开语法"><!--[--><!--]--> 展开语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/数组.md" class="" aria-label="Array数组"><!--[--><!--]--> Array数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/二维数组.md" class="" aria-label="二维数组"><!--[--><!--]--> 二维数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/重绘与回流.md" class="" aria-label="重绘与回流"><!--[--><!--]--> 重绘与回流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/DOM节点.md" class="" aria-label="DOM节点"><!--[--><!--]--> DOM节点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JaveScript_object.md" class="" aria-label="对象Object"><!--[--><!--]--> 对象Object <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript控制结构.md" class="" aria-label="控制结构"><!--[--><!--]--> 控制结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript隐式转换.md" class="" aria-label="隐式转换"><!--[--><!--]--> 隐式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript显式转换.md" class="" aria-label="显式转换"><!--[--><!--]--> 显式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/解构赋值.md" class="" aria-label="解构赋值"><!--[--><!--]--> 解构赋值 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/data-自定义属性.md" class="" aria-label="data-自定义属性"><!--[--><!--]--> data-自定义属性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/git/Git.md" class="" aria-label="Git分布式版本控制"><!--[--><!--]--> Git分布式版本控制 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">小程序-04-自定义组件 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1、自定义组件-组件的创建和引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="1、自定义组件 - 组件的创建和引用"><!--[--><!--]--> 1、自定义组件 - 组件的创建和引用 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1-1、创建组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1、创建组件"><!--[--><!--]--> 1.1、创建组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1-2-、引用组件的方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2.、引用组件的方式"><!--[--><!--]--> 1.2.、引用组件的方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1-3、局部引用组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3、局部引用组件"><!--[--><!--]--> 1.3、局部引用组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1-4、全局引用组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.4、全局引用组件"><!--[--><!--]--> 1.4、全局引用组件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1-5、-全局引用-vs-局部引用" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.5、 全局引用 VS 局部引用"><!--[--><!--]--> 1.5、 全局引用 VS 局部引用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_1-6-、组件和页面的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.6.、组件和页面的区别"><!--[--><!--]--> 1.6.、组件和页面的区别 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_2、自定义组件-样式" class="router-link-active router-link-exact-active sidebar-item" aria-label="2、自定义组件 - 样式"><!--[--><!--]--> 2、自定义组件 - 样式 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_2-1、组件样式隔离" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1、组件样式隔离"><!--[--><!--]--> 2.1、组件样式隔离 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_2-2、组件样式隔离的注意点" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2、组件样式隔离的注意点"><!--[--><!--]--> 2.2、组件样式隔离的注意点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_2-3、修改组件的样式隔离选项" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3、修改组件的样式隔离选项"><!--[--><!--]--> 2.3、修改组件的样式隔离选项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_2-4-、styleisolation-的可选值" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.4.、styleIsolation 的可选值"><!--[--><!--]--> 2.4.、styleIsolation 的可选值 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_3、自定义组件-数据、方法、属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="3、自定义组件 - 数据、方法、属性"><!--[--><!--]--> 3、自定义组件 - 数据、方法、属性 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_3-1、data数据" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1、data数据"><!--[--><!--]--> 3.1、data数据 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_3-2、methods方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2、methods方法"><!--[--><!--]--> 3.2、methods方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_3-3、properties-属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3、properties 属性"><!--[--><!--]--> 3.3、properties 属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_3-4、data-和-properties-的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4、data 和 properties 的区别"><!--[--><!--]--> 3.4、data 和 properties 的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_3-5、修改-properties-的值" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.5、修改 properties 的值"><!--[--><!--]--> 3.5、修改 properties 的值 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_4、自定义组件-数据监听器" class="router-link-active router-link-exact-active sidebar-item" aria-label="4、自定义组件 - 数据监听器"><!--[--><!--]--> 4、自定义组件 - 数据监听器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_5、自定义组件-纯数据字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="5、自定义组件 - 纯数据字段"><!--[--><!--]--> 5、自定义组件 - 纯数据字段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_6、自定义组件-组件的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="6、自定义组件 - 组件的生命周期"><!--[--><!--]--> 6、自定义组件 - 组件的生命周期 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_6-1、组件主要的生命周期函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.1、组件主要的生命周期函数"><!--[--><!--]--> 6.1、组件主要的生命周期函数 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_6-2、lifetimes节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.2、lifetimes节点"><!--[--><!--]--> 6.2、lifetimes节点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_6-3、组件所在页面的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="6.3、组件所在页面的生命周期"><!--[--><!--]--> 6.3、组件所在页面的生命周期 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_7、自定义组件-插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="7、自定义组件 - 插槽"><!--[--><!--]--> 7、自定义组件 - 插槽 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_7-2、单个插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.2、单个插槽"><!--[--><!--]--> 7.2、单个插槽 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_7-3、启用多个插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.3、启用多个插槽"><!--[--><!--]--> 7.3、启用多个插槽 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_7-4、定义-多个插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="7.4、定义 多个插槽"><!--[--><!--]--> 7.4、定义 多个插槽 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_8、自定义组件-父子组件通信" class="router-link-active router-link-exact-active sidebar-item" aria-label="8、自定义组件 - 父子组件通信"><!--[--><!--]--> 8、自定义组件 - 父子组件通信 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_8-1、父子组件之间通信的-3-种方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.1、父子组件之间通信的 3 种方式"><!--[--><!--]--> 8.1、父子组件之间通信的 3 种方式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_8-2-、属性绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.2.、属性绑定"><!--[--><!--]--> 8.2.、属性绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_8-3、事件绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.3、事件绑定"><!--[--><!--]--> 8.3、事件绑定 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_8-4、获取组件实例" class="router-link-active router-link-exact-active sidebar-item" aria-label="8.4、获取组件实例"><!--[--><!--]--> 8.4、获取组件实例 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#_9、自定义组件-behaviors" class="router-link-active router-link-exact-active sidebar-item" aria-label="9、自定义组件 - behaviors"><!--[--><!--]--> 9、自定义组件 - behaviors <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-04.html#一、什么是-behaviors-behaviors" class="router-link-active router-link-exact-active sidebar-item" aria-label="一、什么是 behaviors behaviors？"><!--[--><!--]--> 一、什么是 behaviors behaviors？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#二、behaviors-的工作方式" class="router-link-active router-link-exact-active sidebar-item" aria-label="二、behaviors 的工作方式？"><!--[--><!--]--> 二、behaviors 的工作方式？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#三、创建-behaviors" class="router-link-active router-link-exact-active sidebar-item" aria-label="三、创建 behaviors"><!--[--><!--]--> 三、创建 behaviors <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#四、导入并使用-behavior" class="router-link-active router-link-exact-active sidebar-item" aria-label="四、导入并使用 behavior"><!--[--><!--]--> 四、导入并使用 behavior <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#五、behavior-中所有可用的节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="五、behavior 中所有可用的节点"><!--[--><!--]--> 五、behavior 中所有可用的节点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-04.html#六、同名字段的覆盖和组合规则" class="router-link-active router-link-exact-active sidebar-item" aria-label="六、同名字段的覆盖和组合规则"><!--[--><!--]--> 六、同名字段的覆盖和组合规则 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="小程序-04-自定义组件" tabindex="-1"><a class="header-anchor" href="#小程序-04-自定义组件" aria-hidden="true">#</a> 小程序-04-自定义组件</h1><h2 id="_1、自定义组件-组件的创建和引用" tabindex="-1"><a class="header-anchor" href="#_1、自定义组件-组件的创建和引用" aria-hidden="true">#</a> 1、自定义组件 - 组件的创建和引用</h2><h3 id="_1-1、创建组件" tabindex="-1"><a class="header-anchor" href="#_1-1、创建组件" aria-hidden="true">#</a> 1.1、创建组件</h3><p>文件夹 点击 新建Component</p><p>键入组件的名称之后回车，会自动生成组件对应的 4 个文件，后缀名分别为 .js ， .json ， .wxml 和 .wxss</p><div class="custom-container tip"><p class="custom-container-title">注意</p><p>为了保证目录结构的清晰，建议把不同的组件，存放到单独目录中.</p></div><h3 id="_1-2-、引用组件的方式" tabindex="-1"><a class="header-anchor" href="#_1-2-、引用组件的方式" aria-hidden="true">#</a> 1.2.、引用组件的方式</h3><p>组件的引用方式分为“局部引用”和“全局引用”，顾名思义：</p><ul><li>局部引用：组件只能在当前被引用的页面内使用</li><li>全局引用：组件可以在每个小程序页面中使用</li></ul><p>在页面的 .json 配置文件中引用组件的方式，叫做“局部引用”。示例代码如下：</p><h3 id="_1-3、局部引用组件" tabindex="-1"><a class="header-anchor" href="#_1-3、局部引用组件" aria-hidden="true">#</a> 1.3、局部引用组件</h3><p>在页面的 .json 配置文件中引用组件的方式，叫做“局部引用”。示例代码如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
	<span class="token string-property property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;my-test1&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/test/test&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>其中 my-test1 就是组件使用时的<code>标签名</code>, 而 /components/test/test 就是<code>组件的路径</code></p><h3 id="_1-4、全局引用组件" tabindex="-1"><a class="header-anchor" href="#_1-4、全局引用组件" aria-hidden="true">#</a> 1.4、全局引用组件</h3><p>在 app.json 全局配置文件中引用组件的方式，叫做“全局引用”。示例代码如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token string-property property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token string-property property">&quot;my-test2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/components/test2/test2&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-5、-全局引用-vs-局部引用" tabindex="-1"><a class="header-anchor" href="#_1-5、-全局引用-vs-局部引用" aria-hidden="true">#</a> 1.5、 全局引用 VS 局部引用</h3><p>根据组件的使用频率和范围，来选择合适的引用方式：</p><ul><li>如果某组件在多个页面中经常被用到，建议进行“全局引用”</li><li>如果某组件只在特定的页面中被用到，建议进行“局部引用”</li></ul><h3 id="_1-6-、组件和页面的区别" tabindex="-1"><a class="header-anchor" href="#_1-6-、组件和页面的区别" aria-hidden="true">#</a> 1.6.、组件和页面的区别</h3><p>从表面来看，组件和页面都是由 .js 、 .json 、 .wxml 和 .wxss 这四个文件组成的。但是，组件和 页面的 .js 与 .json 文件有明显的不同：</p><ul><li>组件的 .json 文件中需要声明 &quot;component&quot;: true 属性</li><li>组件的 .js 文件中调用的是 Component() 函数 <ul><li>整个程序启动调用的是 App()</li><li>某个页面的渲染调用的是 Page()</li><li>某个组件的渲染调用的是 Component()</li></ul></li></ul><div class="custom-container tip"><p class="custom-container-title">注意</p><p>组件的事件处理函数需要定义到 methods 节点中</p></div><h2 id="_2、自定义组件-样式" tabindex="-1"><a class="header-anchor" href="#_2、自定义组件-样式" aria-hidden="true">#</a> 2、自定义组件 - 样式</h2><h3 id="_2-1、组件样式隔离" tabindex="-1"><a class="header-anchor" href="#_2-1、组件样式隔离" aria-hidden="true">#</a> 2.1、组件样式隔离</h3><p>默认情况下，自定义组件的样式只对当前组件生效，不会影响到组件之外的 UI 结构，如图所示：</p><p><img src="/assets/componentIMG.cd390da1.png" alt=""></p><ul><li>组件 A 的样式不会影响组件 C 的样式</li><li>组件 A 的样式不会影响小程序页面的样式</li><li>小程序页面的样式不会影响组件 A 和 C 的样式</li></ul><p>组件样式的隔离性的好处有：</p><ol><li>防止外界的样式影响组件内部的样式</li><li>防止组件的样式破坏外界的样式</li></ol><h3 id="_2-2、组件样式隔离的注意点" tabindex="-1"><a class="header-anchor" href="#_2-2、组件样式隔离的注意点" aria-hidden="true">#</a> 2.2、组件样式隔离的注意点</h3><div class="custom-container tip"><p class="custom-container-title">注意点</p><ul><li><code>app.wxss</code> 中的全局样式对组件无效</li><li>只有 class 选择器会有样式隔离效果， id 选择器、属性选择器、标签选择器不受样式隔离的影 响</li></ul><p>建议：在组件和引用组件的页面中建议使用 class 选择器，</p><p>不要使用 id、属性、标签选择器！</p><p>因为在绝 大多数情况下, 我们希望组件的样式是隔离开的</p></div><h3 id="_2-3、修改组件的样式隔离选项" tabindex="-1"><a class="header-anchor" href="#_2-3、修改组件的样式隔离选项" aria-hidden="true">#</a> 2.3、修改组件的样式隔离选项</h3><p>默认情况下，自定义组件的样式隔离特性能够防止组件内外样式互相干扰的问题。</p><p>但有时，我们希望在外界能够控制组件内部的样式，此时，可以通过 <code>styleIsolation</code> 修改组件的样 式隔离选项，用法如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// 默认值isolated: 代表启动样式隔离</span>
		<span class="token comment">// apply-shared: 代表页面wxss样式将影响自定义组件</span>
		<span class="token comment">// shared: 代表双向的影响</span>
		<span class="token literal-property property">styleIsolation</span><span class="token operator">:</span> <span class="token string">&#39;apply-shared&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 或在组件的.json 文件中新增加如下配置</span>
<span class="token comment">// {</span>
<span class="token comment">// 	&quot;styleIsolation&quot;: &quot;isolated&quot;</span>
<span class="token comment">// }</span>
</code></pre></div><h3 id="_2-4-、styleisolation-的可选值" tabindex="-1"><a class="header-anchor" href="#_2-4-、styleisolation-的可选值" aria-hidden="true">#</a> 2.4.、<code>styleIsolation</code> 的可选值</h3><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>isolated</td><td>是</td><td>表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响</td></tr><tr><td>apply-shared</td><td>否</td><td>表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面</td></tr><tr><td>shared</td><td>否</td><td>表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 <code>apply-shared</code> 或 <code>shared</code> 的自定义组件</td></tr></tbody></table><h2 id="_3、自定义组件-数据、方法、属性" tabindex="-1"><a class="header-anchor" href="#_3、自定义组件-数据、方法、属性" aria-hidden="true">#</a> 3、自定义组件 - 数据、方法、属性</h2><h3 id="_3-1、data数据" tabindex="-1"><a class="header-anchor" href="#_3-1、data数据" aria-hidden="true">#</a> 3.1、data数据</h3><p>在小程序组件中，用于组件模板渲染的私有数据，需要定义到 data 节点中，</p><h3 id="_3-2、methods方法" tabindex="-1"><a class="header-anchor" href="#_3-2、methods方法" aria-hidden="true">#</a> 3.2、methods方法</h3><p>在小程序组件中，事件处理函数和自定义方法需要定义到 methods 节点中</p><h3 id="_3-3、properties-属性" tabindex="-1"><a class="header-anchor" href="#_3-3、properties-属性" aria-hidden="true">#</a> 3.3、properties 属性</h3><p>在小程序组件中， properties 是组件的对外属性，<strong>用来接收外界(父组件)传递到组件中的数据</strong>，示例 代码如下</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token comment">// 属性定义</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 完整定义 属性的方式【当需要指定属性默认值时，建议使用此方式】</span>
    <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 属性值的数据类型</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
      <span class="token comment">// 属性值的默认值</span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 简化定义 属性的方式</span>
    <span class="token literal-property property">max</span><span class="token operator">:</span> Number
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_3-4、data-和-properties-的区别" tabindex="-1"><a class="header-anchor" href="#_3-4、data-和-properties-的区别" aria-hidden="true">#</a> 3.4、data 和 properties 的区别</h3><p>在小程序的组件中， properties 属性和 data 数据的用法相同，它们都是可读可写的，只不过：</p><ul><li>data 更倾向于存储组件的私有数据</li><li>properties 更倾向于存储外界传递到组件中的数据 <ol><li>所以, 也不太建议修改 properties 数据</li><li>如果要修改 properties 的数据, 最好通过子组件通信给父组件的方式实现</li></ol></li></ul><h3 id="_3-5、修改-properties-的值" tabindex="-1"><a class="header-anchor" href="#_3-5、修改-properties-的值" aria-hidden="true">#</a> 3.5、修改 properties 的值</h3><p>由于 data 数据和 properties 属性在本质上没有任何区别，因此 properties 属性的值也可以用于 页面渲染，或使用 setData 为 properties 中的属性重新赋值，示例代码如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">max</span><span class="token operator">:</span> Number
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用 setData 修改属性的值</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>max <span class="token operator">+</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_4、自定义组件-数据监听器" tabindex="-1"><a class="header-anchor" href="#_4、自定义组件-数据监听器" aria-hidden="true">#</a> 4、自定义组件 - 数据监听器</h2><p>数据监听器用于监听和响应任何属性和数据字段的变化，从而执行特定的操作。 它的作用<code>类似于vue中的watch侦听器</code>。 在小程序组件中,数据监听器的基本语法格式如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// observers: 观察者</span>
    <span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;字段A， 字段B&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">字段<span class="token constant">A</span>的新值， 字段<span class="token constant">B</span>的新值</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>监听对象属性的变化:</p><p>数据监听器支持监听对象中单个或多个属性的变化，示例语法如下：</p><p>方式1: 普通方式</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// observers: 观察者</span>
  <span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;对象.属性A， 对象.属性B&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">属性<span class="token constant">A</span>的新值， 属性<span class="token constant">B</span>的新值</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 触发此侦听器的 3 种情况：</span>
      <span class="token comment">// 【为属性A赋值】：使用setData 设置this.data.对象.属性A 时触发</span>
      <span class="token comment">// 【为属性B赋值】：使用setData 设置this.data.对象.属性B 时触发</span>
      <span class="token comment">// 【为对象赋值】：使用setData 设置this.data.对象 时触发</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>方式2: 通配符方式, 监听对象中所有属性的变化</p><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;_rgb.**&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">fullColor</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">.</span>r<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">.</span>g<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>obj<span class="token punctuation">.</span>b<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

</code></pre></div><h2 id="_5、自定义组件-纯数据字段" tabindex="-1"><a class="header-anchor" href="#_5、自定义组件-纯数据字段" aria-hidden="true">#</a> 5、自定义组件 - 纯数据字段</h2><p><strong>概念</strong>：纯数据字段指的是那些不用于界面渲染的 data 字段。</p><p>应用场景：</p><p>例如有些情况下，某些 data 中的字段<strong>既不会展示在界面上</strong>，<strong>也不会传递给其他组件</strong>，<strong>仅仅在当前组件内部使用</strong>。带有这种特性的 data 字段适合被设置为<strong>纯数据字段</strong>。例如之前控制上拉加载更多的节 流阀 isLoading 这种类型的数据.</p><p>使用纯数据的好处:纯数据字段有助于<strong>提升页面更新的性能</strong>。</p><p>因为在小程序中， data 中声明的数据，会具备一个响应式的效果，系统的底层会对数据进行值变化的 监听，如果，该数据只是纯数据，没有必要进行响应式的监听，因此定义为纯数据能够提高页面的性能</p><p>2、使用规则</p><p>在 Component 构造器的 options 节点中，指定 pureDataPattern 为一个 正则表达式 ，字段名符合 这个正则</p><p>表达式的字段将会被视为纯数据字段，示例代码如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定所有_开头的数据字段为 纯数据字段</span>
    <span class="token literal-property property">pureDataPattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^_</span><span class="token regex-delimiter">/</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 普通数据字段</span>
    <span class="token literal-property property">_b</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 纯数据字段</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>3、使用纯数据字段改造数据监听器案例</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 指定所有_开头的数据字段为 纯数据字段</span>
    <span class="token literal-property property">pureDataPattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^_</span><span class="token regex-delimiter">/</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将 rgb 改造为以 _开头的字段</span>
    <span class="token literal-property property">_rgb</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fullColor</span><span class="token operator">:</span> <span class="token string">&#39;0, 0, 0&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_6、自定义组件-组件的生命周期" tabindex="-1"><a class="header-anchor" href="#_6、自定义组件-组件的生命周期" aria-hidden="true">#</a> 6、自定义组件 - 组件的生命周期</h2><p>小程序组件可用的全部生命周期如下表所示：</p><table><thead><tr><th>声明周期函数</th><th>参数</th><th>描述说明</th></tr></thead><tbody><tr><td><code>created</code></td><td>无</td><td><code>在组件实例刚刚被创建时执行</code></td></tr><tr><td><code>attached</code></td><td>无</td><td><code>在组件实例进入页面节点数时执行</code></td></tr><tr><td>ready</td><td>无</td><td>在组件在视图层布局完成后执行</td></tr><tr><td>moved</td><td>无</td><td>在组件实例被移动到节点数另一个位置时执行</td></tr><tr><td><code>detached</code></td><td>无</td><td><code>在组件实例从页面节点树移除时执行</code></td></tr><tr><td>error</td><td>Object Error</td><td>每当组件方法抛出错误时执行</td></tr></tbody></table><h3 id="_6-1、组件主要的生命周期函数" tabindex="-1"><a class="header-anchor" href="#_6-1、组件主要的生命周期函数" aria-hidden="true">#</a> 6.1、组件主要的生命周期函数</h3><p>在小程序组件中，最重要的生命周期函数是 created 、 attached 、 ready 、 detached 。它们各自的 特点</p><p>① 组件实例刚被创建好的时候， created 生命周期函数会被触发</p><ul><li>此时调用 setData 不会有效果</li><li>通常在这个生命周期函数中，只应该用于给组件的 this 添加一些自定义的属性字段</li></ul><p>② 在组件完全初始化完毕、进入页面节点树后， attached 生命周期函数会被触发</p><ul><li>此时， this.data 已被初始化完毕</li><li>这个生命周期很有用，绝大多数初始化的工作可以在这个时机进行（例如发请求获取初始数据）</li></ul><p>③ 在组件离开页面节点树后， detached 生命周期函数会被触发</p><ul><li>退出一个页面时，会触发页面内每个自定义组件的 detached 生命周期函数</li><li>此时适合做一些清理性质的工作,例如,清除定时器</li></ul><p>④ 代表组件渲染完成的生命周期函数为 ready</p><ul><li>可以操作页面</li></ul><h3 id="_6-2、lifetimes节点" tabindex="-1"><a class="header-anchor" href="#_6-2、lifetimes节点" aria-hidden="true">#</a> 6.2、lifetimes节点</h3><p>在小程序组件中，生命周期函数可以直接定义在 Component 构造器的第一级参数中，也可以在 lifetimes 字段内进行声明（这是推荐的方式，其优先级最高）。示例代码如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 推荐用法</span>
  <span class="token literal-property property">lifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 在组件实例进入页面节点树时执行</span>
    <span class="token function">detached</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 在组建实例被从页面节点树移除时执行</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-3、组件所在页面的生命周期" tabindex="-1"><a class="header-anchor" href="#_6-3、组件所在页面的生命周期" aria-hidden="true">#</a> 6.3、组件所在页面的生命周期</h3><p>什么是组件所在页面的生命周期？</p><p>有时，<strong>自定义组件的行为依赖于页面状态的变化</strong>，此时就需要用到组件所在页面的生命周期。</p><p>例如：每当触发页面的 show 生命周期函数的时候，我们希望能够重新生成一个随机的 RGB 颜色值。 在自定义组件中，组件所在页面的生命周期函数有如下 3 个，分别是：</p><table><thead><tr><th>生命周期函数</th><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>show</td><td>无</td><td>组件所在的页面被<code>展示</code>时执行</td></tr><tr><td>hide</td><td>无</td><td>组件所在的页面被<code>隐藏</code>时执行</td></tr><tr><td>resize</td><td>Object Size</td><td>组件所在的<code>页面尺寸变化</code>时执行</td></tr></tbody></table><p>所以组件所在页面的生命周期, 相当于在组件中, 监听了组件所在页面的一些事件.</p><p>6.4、pageLifetimes 节点</p><p>组件所在页面的生命周期函数，需要定义在 pageLifetimes 节点中，示例代码如下：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 组件在页面的生命周期函数在该节点定义</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 页面被展示</span>
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 页面被隐藏</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 页面尺寸变化</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>我们可以利用组件所在页面的生命周期, 在页面每次被展示的时候, 随机生成 RGB 颜色值</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 组件在页面的生命周期函数在该节点定义</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 组件所在的页面被展示时，随机生成一个颜色值</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">_rgb</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">r</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">g</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">b</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 页面被隐藏</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 页面尺寸变化</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>或者这样,逻辑更清晰</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 在组件的methods节点中，定义一个随机颜色的方法</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">_randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 设置data中的数据</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">_rgb</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">r</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">g</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">b</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 在组件内部的pageLifetimes节点中，监听组件在页面的生命周期函数</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在页面被展示的时候，调用该方法</span>
    <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 页面被隐藏</span>
    <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 页面尺寸变化</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_7、自定义组件-插槽" tabindex="-1"><a class="header-anchor" href="#_7、自定义组件-插槽" aria-hidden="true">#</a> 7、自定义组件 - 插槽</h2><p>在自定义组件的 wxml 结构中，可以提供一个 节点（插槽），用于承载组件使用者提供的 wxml 结构。</p><p><img src="/assets/c2.83eefc52.png" alt=""></p><p>其实插槽, 说的通俗一些, 就是子组件挖坑，父组件填坑的过程。由父组件在使用子组件的时候, 决定子 组件内部的某一些布局展示</p><ul><li>子组件通过 挖坑</li><li>父组件通过组件标签中间的内容来填坑</li></ul><h3 id="_7-2、单个插槽" tabindex="-1"><a class="header-anchor" href="#_7-2、单个插槽" aria-hidden="true">#</a> 7.2、单个插槽</h3><p>在小程序中，默认每个自定义组件中只允许使用一个 进行占位，这种个数上的限制叫做单个插槽。</p><p>自定义组件的布局代码</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token comment">&lt;!-- 组件的封装者 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>这里是组件的内部节点<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 对于不确定的内容，可以使用&lt;slot&gt; 进行占位， 具体内容由组件的使用者决定 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-html ext-html"><pre class="language-html"><code><span class="token comment">&lt;!-- 组件的使用者 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 这部分内容将被放置在组件的 &lt;slot&gt;的位置上 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>这里是插入到组件slot中的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_7-3、启用多个插槽" tabindex="-1"><a class="header-anchor" href="#_7-3、启用多个插槽" aria-hidden="true">#</a> 7.3、启用多个插槽</h3><p>在小程序的自定义组件中，需要使用多 插槽时，可以在组件的 .js 文件中，通过如下方式进行启用。 示例代码如下：<strong>开启多个插槽的配置</strong></p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">multipleSolts</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 在组件定义时的选项中启用多 slot支持</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ...*/</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ...*/</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>一旦开启了多个插槽的配置, 就意味着在组件内部可能会有多个标签, 那我们在定义这多个标签的时候, 需要给每一个起名字.</p><p>而组件使用者在填充的时候, 需要指明填充哪一个</p><h3 id="_7-4、定义-多个插槽" tabindex="-1"><a class="header-anchor" href="#_7-4、定义-多个插槽" aria-hidden="true">#</a> 7.4、定义 多个插槽</h3><p>可以在组件的 .wxml 中使用多个 标签，以不同的 name 来区分不同的插槽。示例代码如下：</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- name 为 before 的第一个 插槽 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>这是一段固定的文本内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- name 为 after 的第一个 插槽 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在使用带有多个插槽的自定义组件时，需要用 slot 属性来将节点插入到不同的 中。示例代码如下：</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token comment">&lt;!-- 组件的使用者 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 这部分内容将被放置在组件的 &lt;slot&gt;的位置上 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这是通过插槽填充的内容,name为before<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>这是通过插槽填充的内容,name为after<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_8、自定义组件-父子组件通信" tabindex="-1"><a class="header-anchor" href="#_8、自定义组件-父子组件通信" aria-hidden="true">#</a> 8、自定义组件 - 父子组件通信</h2><h3 id="_8-1、父子组件之间通信的-3-种方式" tabindex="-1"><a class="header-anchor" href="#_8-1、父子组件之间通信的-3-种方式" aria-hidden="true">#</a> 8.1、父子组件之间通信的 3 种方式</h3><p>① 属性绑定</p><ul><li>用于父组件向子组件的指定属性设置数据，仅能设置 JSON 兼容的数据(只能传递数据，不能传递 方法)</li></ul><p>② 事件绑定</p><ul><li>用于子组件向父组件传递数据，可以传递任意数据(包括数据和方法)</li></ul><p>③ 获取组件实例</p><ul><li>父组件还可以通过 <code>this.selectComponent()</code> 获取子组件实例对象</li><li>这样就可以直接访问子组件的任意数据和方法</li></ul><h3 id="_8-2-、属性绑定" tabindex="-1"><a class="header-anchor" href="#_8-2-、属性绑定" aria-hidden="true">#</a> 8.2.、属性绑定</h3><p>属性绑定用于实现父向子传值，而且只能传递普通类型的数据，无法将方法传递给子组件</p><div class="language-html ext-html"><pre class="language-html"><code>data: {
// 父组件中的data节点
	count: 0
}
// 父组件的wxml结构
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-test3</span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{count}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-test3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>------<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>父组件中，count值为 {{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>子组件在 properties 节点中声明对应的属性并使用。示例代码如下：</p><div class="language-html ext-html"><pre class="language-html"><code>// 子组件的properties 节点
properties: {
	count: Number
}
// 子组件的wxml结构
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>子组件中， count值为：{{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_8-3、事件绑定" tabindex="-1"><a class="header-anchor" href="#_8-3、事件绑定" aria-hidden="true">#</a> 8.3、事件绑定</h3><p>事件绑定用于实现子向父传值，可以传递任何类型的数据。使用步骤如下：</p><p>① 在子组件的 js 中，在特定的时机通过调用 this.triggerEvent (&#39;自定义事件名称&#39;, { /* 参数对象 */ })产生一个自定义事件, 并且可以带上事件参数对象.</p><p>② 在父组件的 wxml 中的子组件标签中，使用 bind :自定义事件名称=&quot;事件处理函数&quot;监听自定义事 件。</p><p>③ 在父组件的 js 中，定义一个函数，这个函数即将通过自定义事件的形式，传递给子组件</p><p>④ 在父组件的 事件处理函数中，通过 e.detail 获取到子组件传递过来的数据</p><p>具体的代码如下:</p><blockquote><p>步骤1：在子组件的 js 中，在特定的时机通过调用 this.triggerEvent 产生一个自定义事件</p></blockquote><div class="language-html ext-html"><pre class="language-html"><code>// 子组件中的 wxml结构
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>子组件中，count值为: {{count}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code>  <span class="token comment">// 子组件中的js代码</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// this.setData这行代码写的很多此一举</span>
      <span class="token comment">// 因为只要父组件修改了它传递到子组件的数据, 子组件自然就随之进行更新了</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 使用 this.triggerEvent去触发父组件的自定义事件</span>
      <span class="token comment">// 并将数值同步给父组件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">tiggerEvent</span><span class="token punctuation">(</span><span class="token string">&#39;sync&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>count
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>步骤2：在父组件的 wxml 中的子组件标签中，使用 bind :自定义事件名称=“事件处理函数”监听 自定义事件</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-test3</span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{count}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>syncCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-test3</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>步骤3：在父组件的 js 中，定义一个函数，这个函数在自定义事件产生的时候, 会得到执行</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 在父组件的JS文件中，定义一个事件</span>
<span class="token function">syncCount</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>步骤4：在父组件的 js 中，通过 e.detail 获取到子组件传递过来的数据。</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 父组件的js文件</span>
<span class="token function">syncCount</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
<span class="token comment">// 父组件通过事件对象 e 获取到子组件传递的值</span>
		<span class="token literal-property property">count</span><span class="token operator">:</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-4、获取组件实例" tabindex="-1"><a class="header-anchor" href="#_8-4、获取组件实例" aria-hidden="true">#</a> 8.4、获取组件实例</h3><p>可在父组件里调用 this.selectComponent(&quot;id或class选择器&quot;) ，获取子组件的实例对象，从而直 接访问子组件的任意数据和方法。调用时需要传入一个选择器，例如 this.selectComponent(&quot;.mycomponent&quot;) 。</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token comment">&lt;!--
父组件的wxml文件
使用 bind:自定义事件名称（推荐: 结构清晰
--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-test</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cusstomA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{count}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>syncCount<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-test</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getChild<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取子组件实例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-javascript ext-js"><pre class="language-javascript"><code>    <span class="token comment">//父组件的js文件 按钮的tap事件处理函数</span>
    <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 切记下面的参数不能传递标签选择器，不然返回的是null</span>
      <span class="token comment">// 也可以传递ID选择器</span>
      <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">&#39;.customA&#39;</span><span class="token punctuation">)</span>
      <span class="token comment">// 调用子组件的setData方法，修改count的值，</span>
      child<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      child<span class="token punctuation">.</span><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 直接调用子组件的addCount方法，该方法在child实例对象的</span>
      __proto__上可以访问到该方法
    <span class="token punctuation">}</span>
    <span class="token comment">// 这里的代码其实有点问题, 因为count的数据是属于父组件的, 并且由父组件通过自定义属性传递</span>
    <span class="token comment">// 给了子组件,</span>
    <span class="token comment">// 如果想修改这个count的值,</span>
    <span class="token comment">// 直接在父组件中修改即可,</span>
    <span class="token comment">// 子组件自动就能更新.完全没有</span>
    <span class="token comment">// 必要再这种场景下去修改子组件中count的值</span>
</code></pre></div><h2 id="_9、自定义组件-behaviors" tabindex="-1"><a class="header-anchor" href="#_9、自定义组件-behaviors" aria-hidden="true">#</a> 9、自定义组件 - behaviors</h2><h3 id="一、什么是-behaviors-behaviors" tabindex="-1"><a class="header-anchor" href="#一、什么是-behaviors-behaviors" aria-hidden="true">#</a> 一、什么是 behaviors behaviors？</h3><p>是小程序中，用于实现组件间代码共享的特性，类似于 Vue.js 中的 “mixins” 。</p><h3 id="二、behaviors-的工作方式" tabindex="-1"><a class="header-anchor" href="#二、behaviors-的工作方式" aria-hidden="true">#</a> 二、behaviors 的工作方式？</h3><p>每个 behaviors 可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和 方法会被合并到组件中。</p><p>每个组件可以引用多个 behaviors ， behaviors 也可以引用其它 behaviors 。</p><p>只有当组件共享的代码就可以使用 behaviors 来共享，如果是组件私有的代码，就不需要放在 behaviors 中</p><h3 id="三、创建-behaviors" tabindex="-1"><a class="header-anchor" href="#三、创建-behaviors" aria-hidden="true">#</a> 三、创建 behaviors</h3><p>调用 Behavior(Object object) 方法即可创建一个共享的 behavior 实例对象，供所有的组件使 用：</p><ul><li>创建一个文件夹 behaviors</li><li>新建 js 文件 my-behavior.js</li><li>在该文件中书写以下代码</li></ul><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 调用 Behavior()方法， 创建实例对象</span>
<span class="token comment">// 并使用 module.exports 将 behavior 实例对象共享出去</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">Behavior</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 属性节点</span>
  <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 私有数据节点</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;zs&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 事件处理函数和自定义方法节点</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 其他节点...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="四、导入并使用-behavior" tabindex="-1"><a class="header-anchor" href="#四、导入并使用-behavior" aria-hidden="true">#</a> 四、导入并使用 behavior</h3><p>在组件中，使用 require() 方法导入需要的 behavior ，挂载后即可访问 behavior 中的数据或方 法，示例代码：</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 1.使用 required() 导入需要的自定义 behavior 模块</span>
<span class="token keyword">const</span> myBehavior <span class="token operator">=</span> <span class="token function">required</span><span class="token punctuation">(</span><span class="token string">&quot;../../behaviors/my-behavior&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 2.将导入的behavior 实例对象， 挂载在 behaviors 数组节点中， 即可生效</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 在组件内部 与data节点平级的位置定义该属性，挂载behavior模块</span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>myBehavior<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-html ext-html"><pre class="language-html"><code>// 3.在子组件中使用behavior中的东西
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>在组件中共享的behavior是： {{username}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="custom-container tip"><p class="custom-container-title">注意</p><p>注意： Behaviors 就仅仅只是做代码的复用而已，如果多个组件导入了同一种Behaviors，他们的数据 是相互独立的。</p></div><h3 id="五、behavior-中所有可用的节点" tabindex="-1"><a class="header-anchor" href="#五、behavior-中所有可用的节点" aria-hidden="true">#</a> 五、behavior 中所有可用的节点</h3><table><thead><tr><th style="text-align:left;">定义段</th><th style="text-align:left;">类型</th><th style="text-align:left;">是否必填</th><th style="text-align:left;">描述</th><th style="text-align:left;">最低版本</th></tr></thead><tbody><tr><td style="text-align:left;">properties</td><td style="text-align:left;">Object Map</td><td style="text-align:left;">否</td><td style="text-align:left;">组件的对外属性，是属性名到属性设置的映射表</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">data</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">组件的内部数据，和 <code>properties</code> 一同用于组件的模板渲染</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">observers</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">组件数据字段监听器，用于监听 properties 和 data 的变化，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/observer.html" target="_blank" rel="noopener noreferrer">数据监听器<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.6.1<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td style="text-align:left;">methods</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">组件的方法，包括事件响应函数和任意的自定义方法，关于事件响应函数的使用，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/events.html" target="_blank" rel="noopener noreferrer">组件间通信与事件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">behaviors</td><td style="text-align:left;">String Array</td><td style="text-align:left;">否</td><td style="text-align:left;">类似于 mixins 和traits的组件间代码复用机制，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html" target="_blank" rel="noopener noreferrer">behaviors<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">created</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">组件生命周期函数 - 在组件实例刚刚被创建时执行，注意此时不能调用 <code>setData</code> )</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">attached</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">组件生命周期函数 - 在组件实例进入页面节点树时执行)</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">ready</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">组件生命周期函数 - 在组件布局完成后执行)</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">moved</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">组件生命周期函数 - 在组件实例被移动到节点树另一个位置时执行)</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">detached</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">组件生命周期函数 - 在组件实例被从页面节点树移除时执行)</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">relations</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">组件间关系定义，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/relations.html" target="_blank" rel="noopener noreferrer">组件间关系<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">lifetimes</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">组件生命周期声明对象，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html" target="_blank" rel="noopener noreferrer">组件生命周期<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.2.3<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td style="text-align:left;">pageLifetimes</td><td style="text-align:left;">Object</td><td style="text-align:left;">否</td><td style="text-align:left;">组件所在页面的生命周期声明对象，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html" target="_blank" rel="noopener noreferrer">组件生命周期<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.2.3<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td style="text-align:left;">definitionFilter</td><td style="text-align:left;">Function</td><td style="text-align:left;">否</td><td style="text-align:left;">定义段过滤器，用于自定义组件扩展，参见 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/extend.html" target="_blank" rel="noopener noreferrer">自定义组件扩展<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td style="text-align:left;"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="noopener noreferrer">2.2.3<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr></tbody></table><h3 id="六、同名字段的覆盖和组合规则" tabindex="-1"><a class="header-anchor" href="#六、同名字段的覆盖和组合规则" aria-hidden="true">#</a> 六、同名字段的覆盖和组合规则</h3><p>组件和它引用的 behavior 中可以包含同名的字段，此时可以参考如下 3 种同名时的处理规则：</p><p>① 同名的数据字段 ( data )</p><p>② 同名的属性 ( properties ) 或方法 ( methods )</p><p>③ 同名的生命周期函数</p><p>关于详细的覆盖和组合规则，大家可以参考微信小程序官方文档给出的说明：</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4409970e.js" defer></script>
  </body>
</html>
