<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>小程序-05 | KBlog</title><meta name="description" content="KBlog">
    <link rel="modulepreload" href="/assets/app.4409970e.js"><link rel="modulepreload" href="/assets/wechat-05.html.410a33c5.js"><link rel="modulepreload" href="/assets/wechat-05.html.ebd0231c.js"><link rel="prefetch" href="/assets/index.html.9bd8fa5e.js"><link rel="prefetch" href="/assets/Git.html.5fd7768b.js"><link rel="prefetch" href="/assets/React.html.734ff348.js"><link rel="prefetch" href="/assets/React学习.html.dba41bb9.js"><link rel="prefetch" href="/assets/Vite_React构建项目.html.554c720e.js"><link rel="prefetch" href="/assets/class类.html.78dad533.js"><link rel="prefetch" href="/assets/data-自定义属性.html.bf9b733f.js"><link rel="prefetch" href="/assets/DOM节点.html.1e565be1.js"><link rel="prefetch" href="/assets/ES6.html.1f774e59.js"><link rel="prefetch" href="/assets/Function函数.html.9cf872e2.js"><link rel="prefetch" href="/assets/getElementsByClassName.html.89ae48d0.js"><link rel="prefetch" href="/assets/JavaScript控制结构.html.8cd64c62.js"><link rel="prefetch" href="/assets/JavaScript显式转换.html.10f05d5c.js"><link rel="prefetch" href="/assets/JavaScript隐式转换.html.b18369f4.js"><link rel="prefetch" href="/assets/JaveScript_object.html.0651c5d0.js"><link rel="prefetch" href="/assets/jQuery.html.3d2e856a.js"><link rel="prefetch" href="/assets/JS_Base.html.39172b24.js"><link rel="prefetch" href="/assets/JS执行机制.html.2b286877.js"><link rel="prefetch" href="/assets/Math.html.03dc3519.js"><link rel="prefetch" href="/assets/SPA.html.a8a7a7b3.js"><link rel="prefetch" href="/assets/事件对象.html.1467922b.js"><link rel="prefetch" href="/assets/事件流.html.ff5ced0d.js"><link rel="prefetch" href="/assets/二维数组.html.a4e05fc2.js"><link rel="prefetch" href="/assets/交集与并集选择器.html.5aa457c3.js"><link rel="prefetch" href="/assets/元素滚动事件.html.06083065.js"><link rel="prefetch" href="/assets/前端面试题.html.bc29ee23.js"><link rel="prefetch" href="/assets/展开语法.html.75e743fb.js"><link rel="prefetch" href="/assets/循环.html.a4c2d7f3.js"><link rel="prefetch" href="/assets/数组.html.bc6285f9.js"><link rel="prefetch" href="/assets/构造函数.html.96be9e3b.js"><link rel="prefetch" href="/assets/案例.html.f8ed8be5.js"><link rel="prefetch" href="/assets/解构赋值.html.8b4622f8.js"><link rel="prefetch" href="/assets/重绘与回流.html.c962a565.js"><link rel="prefetch" href="/assets/闭包.html.0263d4bf.js"><link rel="prefetch" href="/assets/Ajax.html.f33e4c8b.js"><link rel="prefetch" href="/assets/axios.html.92e1dfb3.js"><link rel="prefetch" href="/assets/es6模块化.html.940960f4.js"><link rel="prefetch" href="/assets/express.html.99377709.js"><link rel="prefetch" href="/assets/Promise.html.8ae266f3.js"><link rel="prefetch" href="/assets/npm使用手册.html.563456c5.js"><link rel="prefetch" href="/assets/npm命令发生的事.html.d0d96222.js"><link rel="prefetch" href="/assets/vite_vue3.html.4a1fb30e.js"><link rel="prefetch" href="/assets/Vite.html.78029b09.js"><link rel="prefetch" href="/assets/Vue-Router.html.692dab5c.js"><link rel="prefetch" href="/assets/Vue2第一章.html.369f8124.js"><link rel="prefetch" href="/assets/Vue2第三章_组件.html.20556b99.js"><link rel="prefetch" href="/assets/Vue2第二章.html.21ae0490.js"><link rel="prefetch" href="/assets/Vue3.html.16eb0162.js"><link rel="prefetch" href="/assets/Vue3和JSX.html.eb1e217f.js"><link rel="prefetch" href="/assets/vue3快速上手.html.8f4e9f72.js"><link rel="prefetch" href="/assets/VueCLI.html.87f70eb5.js"><link rel="prefetch" href="/assets/vuepress.html.a675a315.js"><link rel="prefetch" href="/assets/vuepressBuild部署.html.64283a07.js"><link rel="prefetch" href="/assets/wechat-01.html.85072e91.js"><link rel="prefetch" href="/assets/wechat-02.html.89038517.js"><link rel="prefetch" href="/assets/wechat-03.html.439de1dd.js"><link rel="prefetch" href="/assets/wechat-04.html.67e37bb7.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/index.html.cba4b748.js"><link rel="prefetch" href="/assets/Git.html.cdf1f0e6.js"><link rel="prefetch" href="/assets/React.html.075d6b93.js"><link rel="prefetch" href="/assets/React学习.html.97acd3ab.js"><link rel="prefetch" href="/assets/Vite_React构建项目.html.d731d69d.js"><link rel="prefetch" href="/assets/class类.html.6ee9203c.js"><link rel="prefetch" href="/assets/data-自定义属性.html.0f13eec3.js"><link rel="prefetch" href="/assets/DOM节点.html.3755bad6.js"><link rel="prefetch" href="/assets/ES6.html.fdf499c9.js"><link rel="prefetch" href="/assets/Function函数.html.5993ecb3.js"><link rel="prefetch" href="/assets/getElementsByClassName.html.31efea10.js"><link rel="prefetch" href="/assets/JavaScript控制结构.html.aedbecbe.js"><link rel="prefetch" href="/assets/JavaScript显式转换.html.9622e168.js"><link rel="prefetch" href="/assets/JavaScript隐式转换.html.ba57ac40.js"><link rel="prefetch" href="/assets/JaveScript_object.html.d41fd88f.js"><link rel="prefetch" href="/assets/jQuery.html.9b1a642d.js"><link rel="prefetch" href="/assets/JS_Base.html.9c30c146.js"><link rel="prefetch" href="/assets/JS执行机制.html.83181ec8.js"><link rel="prefetch" href="/assets/Math.html.21d0a79d.js"><link rel="prefetch" href="/assets/SPA.html.6da87a88.js"><link rel="prefetch" href="/assets/事件对象.html.8f261e40.js"><link rel="prefetch" href="/assets/事件流.html.8b8156f0.js"><link rel="prefetch" href="/assets/二维数组.html.655fd038.js"><link rel="prefetch" href="/assets/交集与并集选择器.html.2675df48.js"><link rel="prefetch" href="/assets/元素滚动事件.html.7b0c5faa.js"><link rel="prefetch" href="/assets/前端面试题.html.0a46543a.js"><link rel="prefetch" href="/assets/展开语法.html.9807030d.js"><link rel="prefetch" href="/assets/循环.html.685576be.js"><link rel="prefetch" href="/assets/数组.html.2284544a.js"><link rel="prefetch" href="/assets/构造函数.html.a6d6d86d.js"><link rel="prefetch" href="/assets/案例.html.ca71cea3.js"><link rel="prefetch" href="/assets/解构赋值.html.5d014b2e.js"><link rel="prefetch" href="/assets/重绘与回流.html.63e1ccf7.js"><link rel="prefetch" href="/assets/闭包.html.16232180.js"><link rel="prefetch" href="/assets/Ajax.html.150de746.js"><link rel="prefetch" href="/assets/axios.html.5754bbd8.js"><link rel="prefetch" href="/assets/es6模块化.html.400ecc97.js"><link rel="prefetch" href="/assets/express.html.524e0a4b.js"><link rel="prefetch" href="/assets/Promise.html.c60c3ba0.js"><link rel="prefetch" href="/assets/npm使用手册.html.8f43ea67.js"><link rel="prefetch" href="/assets/npm命令发生的事.html.3b0e82af.js"><link rel="prefetch" href="/assets/vite_vue3.html.731bda18.js"><link rel="prefetch" href="/assets/Vite.html.60c8cecd.js"><link rel="prefetch" href="/assets/Vue-Router.html.08c01d00.js"><link rel="prefetch" href="/assets/Vue2第一章.html.310b2aea.js"><link rel="prefetch" href="/assets/Vue2第三章_组件.html.40b7efb7.js"><link rel="prefetch" href="/assets/Vue2第二章.html.e8ba8a77.js"><link rel="prefetch" href="/assets/Vue3.html.c9642658.js"><link rel="prefetch" href="/assets/Vue3和JSX.html.758c694f.js"><link rel="prefetch" href="/assets/vue3快速上手.html.aa430504.js"><link rel="prefetch" href="/assets/VueCLI.html.b33a6056.js"><link rel="prefetch" href="/assets/vuepress.html.73b4e026.js"><link rel="prefetch" href="/assets/vuepressBuild部署.html.e532acb8.js"><link rel="prefetch" href="/assets/wechat-01.html.579db5b8.js"><link rel="prefetch" href="/assets/wechat-02.html.28064df4.js"><link rel="prefetch" href="/assets/wechat-03.html.c36d06ab.js"><link rel="prefetch" href="/assets/wechat-04.html.df40bd68.js"><link rel="prefetch" href="/assets/404.html.2f25284b.js"><link rel="prefetch" href="/assets/404.ff4e6462.js"><link rel="prefetch" href="/assets/Layout.9ea9cd68.js">
    <link rel="stylesheet" href="/assets/style.acf36ec1.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">KBlog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/react/React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小程序"><span class="title">小程序</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小程序"><span class="title">小程序</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-01.md" class="" aria-label="小程序-01"><!--[--><!--]--> 小程序-01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-02.md" class="" aria-label="小程序-02"><!--[--><!--]--> 小程序-02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-03.md" class="" aria-label="小程序-03"><!--[--><!--]--> 小程序-03 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-04.md" class="" aria-label="小程序-04"><!--[--><!--]--> 小程序-04 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-05.md" class="" aria-label="小程序-05"><!--[--><!--]--> 小程序-05 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/node/node.md" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/Ajax.md" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm使用手册.md" class="" aria-label="npm使用手册"><!--[--><!--]--> npm使用手册 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm命令发生的事.md" class="" aria-label="npm命令发生了什么"><!--[--><!--]--> npm命令发生了什么 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/es6模块化.md" class="" aria-label="ES6模块化"><!--[--><!--]--> ES6模块化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/vue/vue3快速上手.md" class="" aria-label="Vue3快速上手"><!--[--><!--]--> Vue3快速上手 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/Vue-Router.md" class="" aria-label="Vue-Router3"><!--[--><!--]--> Vue-Router3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/vuepress.md" class="" aria-label="VuePress使用手册-V2.0"><!--[--><!--]--> VuePress使用手册-V2.0 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/js/构造函数.md" class="" aria-label="构造函数与原型以及class类"><!--[--><!--]--> 构造函数与原型以及class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/class类.md" class="" aria-label="class类"><!--[--><!--]--> class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/Function函数.md" class="" aria-label="深入理解函数"><!--[--><!--]--> 深入理解函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/闭包.md" class="" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件对象.md" class="" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件流.md" class="" aria-label="深入理解事件流"><!--[--><!--]--> 深入理解事件流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/展开语法.md" class="" aria-label="展开语法"><!--[--><!--]--> 展开语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/数组.md" class="" aria-label="Array数组"><!--[--><!--]--> Array数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/二维数组.md" class="" aria-label="二维数组"><!--[--><!--]--> 二维数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/重绘与回流.md" class="" aria-label="重绘与回流"><!--[--><!--]--> 重绘与回流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/DOM节点.md" class="" aria-label="DOM节点"><!--[--><!--]--> DOM节点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JaveScript_object.md" class="" aria-label="对象Object"><!--[--><!--]--> 对象Object <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript控制结构.md" class="" aria-label="控制结构"><!--[--><!--]--> 控制结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript隐式转换.md" class="" aria-label="隐式转换"><!--[--><!--]--> 隐式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript显式转换.md" class="" aria-label="显式转换"><!--[--><!--]--> 显式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/解构赋值.md" class="" aria-label="解构赋值"><!--[--><!--]--> 解构赋值 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/data-自定义属性.md" class="" aria-label="data-自定义属性"><!--[--><!--]--> data-自定义属性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/git/Git.md" class="" aria-label="Git分布式版本控制"><!--[--><!--]--> Git分布式版本控制 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="React"><span class="title">React</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="React"><span class="title">React</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/react/React.md" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="小程序"><span class="title">小程序</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="小程序"><span class="title">小程序</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-01.md" class="" aria-label="小程序-01"><!--[--><!--]--> 小程序-01 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-02.md" class="" aria-label="小程序-02"><!--[--><!--]--> 小程序-02 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-03.md" class="" aria-label="小程序-03"><!--[--><!--]--> 小程序-03 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-04.md" class="" aria-label="小程序-04"><!--[--><!--]--> 小程序-04 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/wechat/wechat-05.md" class="" aria-label="小程序-05"><!--[--><!--]--> 小程序-05 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Node"><span class="title">Node</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Node"><span class="title">Node</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/node/node.md" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/Ajax.md" class="" aria-label="Ajax"><!--[--><!--]--> Ajax <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm使用手册.md" class="" aria-label="npm使用手册"><!--[--><!--]--> npm使用手册 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/npm命令发生的事.md" class="" aria-label="npm命令发生了什么"><!--[--><!--]--> npm命令发生了什么 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/node/es6模块化.md" class="" aria-label="ES6模块化"><!--[--><!--]--> ES6模块化 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue生态"><span class="title">Vue生态</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/vue/vue3快速上手.md" class="" aria-label="Vue3快速上手"><!--[--><!--]--> Vue3快速上手 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/Vue-Router.md" class="" aria-label="Vue-Router3"><!--[--><!--]--> Vue-Router3 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/vue/vuepress.md" class="" aria-label="VuePress使用手册-V2.0"><!--[--><!--]--> VuePress使用手册-V2.0 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="深入JavaScript"><span class="title">深入JavaScript</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/guide/js/构造函数.md" class="" aria-label="构造函数与原型以及class类"><!--[--><!--]--> 构造函数与原型以及class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/class类.md" class="" aria-label="class类"><!--[--><!--]--> class类 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/Function函数.md" class="" aria-label="深入理解函数"><!--[--><!--]--> 深入理解函数 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/闭包.md" class="" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件对象.md" class="" aria-label="事件对象"><!--[--><!--]--> 事件对象 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/事件流.md" class="" aria-label="深入理解事件流"><!--[--><!--]--> 深入理解事件流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/展开语法.md" class="" aria-label="展开语法"><!--[--><!--]--> 展开语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/数组.md" class="" aria-label="Array数组"><!--[--><!--]--> Array数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/二维数组.md" class="" aria-label="二维数组"><!--[--><!--]--> 二维数组 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/重绘与回流.md" class="" aria-label="重绘与回流"><!--[--><!--]--> 重绘与回流 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/DOM节点.md" class="" aria-label="DOM节点"><!--[--><!--]--> DOM节点 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JaveScript_object.md" class="" aria-label="对象Object"><!--[--><!--]--> 对象Object <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript控制结构.md" class="" aria-label="控制结构"><!--[--><!--]--> 控制结构 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript隐式转换.md" class="" aria-label="隐式转换"><!--[--><!--]--> 隐式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/JavaScript显式转换.md" class="" aria-label="显式转换"><!--[--><!--]--> 显式转换 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/解构赋值.md" class="" aria-label="解构赋值"><!--[--><!--]--> 解构赋值 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/js/data-自定义属性.md" class="" aria-label="data-自定义属性"><!--[--><!--]--> data-自定义属性 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/guide/git/Git.md" class="" aria-label="Git分布式版本控制"><!--[--><!--]--> Git分布式版本控制 <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">小程序-05 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-05.html#一、使用-npm-包" class="router-link-active router-link-exact-active sidebar-item" aria-label="一、使用 npm 包"><!--[--><!--]--> 一、使用 npm 包 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_1-1、小程序对-npm-的支持与限制" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.1、小程序对 npm 的支持与限制"><!--[--><!--]--> 1.1、小程序对 npm 的支持与限制 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_1-2、api-promise-化" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.2、API Promise 化"><!--[--><!--]--> 1.2、API Promise 化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_1-3、实现-api-promise-化" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.3、实现 API Promise 化"><!--[--><!--]--> 1.3、实现 API Promise 化 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#二、全局数据共享" class="router-link-active router-link-exact-active sidebar-item" aria-label="二、全局数据共享"><!--[--><!--]--> 二、全局数据共享 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_2-1、mobx" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.1、MobX"><!--[--><!--]--> 2.1、MobX <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_2-2、创建-mobx-的-store-实例" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.2、创建 MobX 的 Store 实例"><!--[--><!--]--> 2.2、创建 MobX 的 Store 实例 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_2-3、使用-store-中的成员" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.3、使用 Store 中的成员"><!--[--><!--]--> 2.3、使用 Store 中的成员 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_2-4、在组件中使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.4、在组件中使用"><!--[--><!--]--> 2.4、在组件中使用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#三、分包" class="router-link-active router-link-exact-active sidebar-item" aria-label="三、分包"><!--[--><!--]--> 三、分包 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_3-1、分包概念" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.1、分包概念"><!--[--><!--]--> 3.1、分包概念 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_3-2、使用分包" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.2、使用分包"><!--[--><!--]--> 3.2、使用分包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_3-3、独立分包" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.3、独立分包"><!--[--><!--]--> 3.3、独立分包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#_3-4、分包预下载" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.4、分包预下载"><!--[--><!--]--> 3.4、分包预下载 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/guide/wechat/wechat-05.html#四、自定义-tabbar" class="router-link-active router-link-exact-active sidebar-item" aria-label="四、自定义 tabBar"><!--[--><!--]--> 四、自定义 tabBar <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="小程序-05" tabindex="-1"><a class="header-anchor" href="#小程序-05" aria-hidden="true">#</a> 小程序-05</h1><h2 id="一、使用-npm-包" tabindex="-1"><a class="header-anchor" href="#一、使用-npm-包" aria-hidden="true">#</a> 一、使用 npm 包</h2><h3 id="_1-1、小程序对-npm-的支持与限制" tabindex="-1"><a class="header-anchor" href="#_1-1、小程序对-npm-的支持与限制" aria-hidden="true">#</a> 1.1、小程序对 npm 的支持与限制</h3><p>目前，小程序中已经支持使用 npm 安装第三方包，从而来提高小程序的开发效率。</p><p>但是，在小程序中使用 npm 包有如下 3 个限制：</p><p>① 不支持依赖于 Node.js 内置库的包</p><p>② 不支持依赖于浏览器内置对象的包</p><p>③ 不支持依赖于 C++ 插件的包</p><p>总结：虽然 npm 上的包有千千万，但是能供小程序使用的包却“为数不多”。</p><h3 id="_1-2、api-promise-化" tabindex="-1"><a class="header-anchor" href="#_1-2、api-promise-化" aria-hidden="true">#</a> 1.2、API Promise 化</h3><p>默认情况下，小程序官方提供的异步 API 都是基于回调函数实现的，例如，网络请求的 API 需要按照 如下的方式调用：</p><div class="language-text ext-text"><pre class="language-text"><code>wx.request({
  method: &#39;&#39;,
  url: &#39;&#39;,
  data: {},
  success: () =&gt; {}, // 成功的回调
  complate: () =&gt; {}, // 无论成功与否都会执行的回调
  fail: () =&gt; {} // 失败的回调
})
</code></pre></div><p>这种代码的缺点是显而易见的, 容易造成回调地狱的问题，代码的可读性、维护性差！而我们就想将这 种类型的代码使用 API Promise 化进行改造</p><p>API Promise 化，指的是通过额外的配置，将官方提供的、基于回调函数的异步 API ，升级改造为基 于 Promise 的异步 API ，从而提高代码的可读性、维护性，避免回调地狱的问题。</p><h3 id="_1-3、实现-api-promise-化" tabindex="-1"><a class="header-anchor" href="#_1-3、实现-api-promise-化" aria-hidden="true">#</a> 1.3、实现 API Promise 化</h3><p>在小程序中，实现 API Promise 化主要依赖于 miniprogram-api-promise 这个第三方的 npm 包。</p><p>它的安装和使用步骤如下:</p><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> i --save miniprogram-api-promise

- 下载完成，我们不能直接使用，而是需要再次重新构建npm包
- 建议在构建前先删除原有的miniprogram_npm
- 然后再点击工具，构建npm
</code></pre></div><p>导入并执行代码</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 在小程序入口文件中（app.js),只需要调用一次 promisifyAll()方法</span>
<span class="token comment">// 即可实现异步API 的Promise化</span>
<span class="token comment">// 按需导入一个方法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  promisifyAll
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;miniprogram-api-promise&#39;</span>
<span class="token comment">// 声明一个常量，为一个空对象，</span>
<span class="token comment">// 并在wx顶级对象下添加一个属性p也指向该空对象，使所有成员都可以使用该对象</span>
<span class="token keyword">const</span> wxp <span class="token operator">=</span> wx<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// promisify all wx&#39;s api</span>
<span class="token comment">// 参数1： wx顶级对象</span>
<span class="token comment">// 参数2： wxp指向一个空对象</span>
<span class="token function">promisifyAll</span><span class="token punctuation">(</span>wx<span class="token punctuation">,</span> wxp<span class="token punctuation">)</span>
</code></pre></div><p>解释上述代码:</p><ul><li>promisifyAll : 做的事就是将 wx 拥有的属性方法都copy并改造了一份给了 wxp 这个对象</li><li>然而, wxp 只是当前 js 文件的一个常量，只能在当前文件使用</li><li>因此：我们在 wx 上挂载一个属性 p 让他和 wxp 指向同一个空对象</li><li>在其他页面或者组件就可以通过全局对象 wx 点出 p 来访问到 wxp</li><li>此时 wx.p 发起异步的请求时，得到的是一个 promise 对象</li><li>那么我们就可以使用 async/await 简化Promise语法</li></ul><h2 id="二、全局数据共享" tabindex="-1"><a class="header-anchor" href="#二、全局数据共享" aria-hidden="true">#</a> 二、全局数据共享</h2><p>全局数据共享（又叫做：状态管理）是为了解决组件之间数据共享的问题。</p><p>开发中常用的全局数据共享方案有： Vuex 、 Redux 、 MobX 等。</p><p>在小程序中，可使用 mobx-miniprogram 配合 mobx-miniprogram-bindings 实现全局数据共享。其 中：</p><ul><li>mobx-miniprogram 用来创建 Store 实例对象</li><li>mobx-miniprogram-bindings 用来把 Store 中的共享数据或方法，绑定到组件或页面中使用</li></ul><h3 id="_2-1、mobx" tabindex="-1"><a class="header-anchor" href="#_2-1、mobx" aria-hidden="true">#</a> 2.1、MobX</h3><div class="language-bash ext-sh"><pre class="language-bash"><code><span class="token function">npm</span> init -y
<span class="token function">npm</span> <span class="token function">install</span> --save mobx-miniprogram mobx-miniprogram-bindings
</code></pre></div><p>这里用到了 mobx-miniprogram-bindings 模块，模块说明在这里：</p><p>https://developers.weixin.qq.com/miniprogram/dev/extended/functional/mobx.html</p><p>npm 命令执行完后，记得在开发者工具的项目中点一下菜单栏中的 <code>工具</code> - <code>构建 npm</code> 。</p><p>在项目根目录下新建store文件夹，并且新建 store.js 文件</p><p><strong>如何使用参考这篇文章</strong>：</p><p>https://developers.weixin.qq.com/community/develop/article/doc/0004686e3c8980b53469f176e51413</p><h3 id="_2-2、创建-mobx-的-store-实例" tabindex="-1"><a class="header-anchor" href="#_2-2、创建-mobx-的-store-实例" aria-hidden="true">#</a> 2.2、创建 MobX 的 Store 实例</h3><p>在项目根目录下新建store文件夹，并且新建 store.js 文件</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 按需导入第三方包的方法observable, action</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
	observable<span class="token punctuation">,</span>
	action
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;mobx-miniprogram&#39;</span>
<span class="token comment">// 创建 Store实例对象,并将其导出</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// 数据字段</span>
	<span class="token literal-property property">numA</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token literal-property property">numB</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	<span class="token comment">// 计算属性</span>
	<span class="token comment">// 在计算属性的方法前，必须加 get修饰符，代表sum的值是只读的，无法进行修改</span>
	<span class="token comment">// 计算属性sum 依赖于numA和numB的值，因此sum函数的返回值就是最终的值</span>
	<span class="token keyword">get</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numA <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numB
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 定义actions方法, 用来修改 store中的数据</span>
	<span class="token literal-property property">updateNum1</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>numA <span class="token operator">+=</span> step
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token literal-property property">updateNum2</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>numB <span class="token operator">+=</span> step
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-3、使用-store-中的成员" tabindex="-1"><a class="header-anchor" href="#_2-3、使用-store-中的成员" aria-hidden="true">#</a> 2.3、使用 Store 中的成员</h3><p>在页面中使用</p><p>页面的 js 文件中</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token comment">// 1.首先 导入第三方包，将数据绑定到页面</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  createStoreBindings
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;mobx-miniprogram-bindings&#39;</span>
<span class="token comment">// 2.其次 在页面的js文件的头部区域导入容器的数据</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  store
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../store/store&#39;</span>
<span class="token comment">// 3. 绑定操作：将仓库的东西绑定到当前的页面中，在页面的js文件的Page方法中</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 上面周期函数--监听页面的加载</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用createStoreBindings方法</span>
    <span class="token comment">// 参数1： 绑定给谁：当前页面this</span>
    <span class="token comment">// 参数2： 对象{ store(容器)， fields(数据)， actions(修改方法)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>storeBindings <span class="token operator">=</span> <span class="token function">createStoreBindings</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token comment">// 映射容器的实例</span>
      store<span class="token punctuation">,</span>
      <span class="token comment">// 映射容器的数据字段</span>
      <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;numA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;numB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sum&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token comment">// 映射容器修改的方法</span>
      <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;updateNum1&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 生命周期函数--监听页面的卸载</span>
  <span class="token function-variable function">onUnload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用this.storeBindings，得到调用createStoreBindings方法的返回值</span>
    <span class="token comment">//调用destroyStoreBindings 方法，进行清理销毁的工作</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>storeBindings<span class="token punctuation">.</span><span class="token function">destroyStoreBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 页面的js文件中的 tap事件处理函数</span>
  <span class="token function">btnHnadler1</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token comment">// 使用仓库中的方法，并传递数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNum1</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>页面的 wxml 文件中</p><div class="language-html ext-html"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用仓库中的数据 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{numA}} + {{numB}} = {{sum}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btnHnadler1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>numA+1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-4、在组件中使用" tabindex="-1"><a class="header-anchor" href="#_2-4、在组件中使用" aria-hidden="true">#</a> 2.4、在组件中使用</h3><ol><li>新建组件文件夹以及组件文件 numbers</li><li>全局注册这个组件</li><li>在 message 页面中使用子组件</li></ol><h2 id="三、分包" tabindex="-1"><a class="header-anchor" href="#三、分包" aria-hidden="true">#</a> 三、分包</h2><h3 id="_3-1、分包概念" tabindex="-1"><a class="header-anchor" href="#_3-1、分包概念" aria-hidden="true">#</a> 3.1、分包概念</h3><p>分包指的是把一个<strong>完整的小程序项目</strong>，按照需求<strong>划分为不同的子包</strong>，在<strong>构建时打包成不同的分包</strong>，<strong>用户在使用时按需进行加载</strong>。</p><p>分包的好处：</p><ul><li>可以优化小程序首次启动的下载时间</li><li>在多团队共同开发时可以更好的解耦协作</li></ul><p><strong>分包前</strong> 项目的构成</p><p>分包前，小程序项目中所有的页面和资源都被打包到了一起，导致整个项目体积过大，影响小程序首次 启动的下载时间。</p><p><strong>分包后</strong> 项目的构成：</p><p>分包后，小程序项目由 <strong>1个主包</strong> + <strong>多个分包</strong>组成：</p><ul><li><strong>主包</strong>：一般只包含项目的启动页面或 TabBar 页面、以及所有分包都需要用到的一些公共资源</li><li><strong>分包</strong>：只包含和当前分包有关的页面和私有资源</li></ul><p>分包的加载规则：</p><ol><li>在小程序启动时，默认会下载主包并启动主包内页面。tabBar 页面需要放到主包中</li><li>当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示。。非 tabBar 页面可以按照功能的不同，划分为不同的分包之后，进行按需下载</li></ol><p>分包的体积限制：</p><p>目前，小程序分包的大小有以下两个限制：</p><ul><li>整个小程序所有分包大小不超过 16M （主包 + 所有分包）</li><li>单个分包/主包大小不能超过 2M</li></ul><h3 id="_3-2、使用分包" tabindex="-1"><a class="header-anchor" href="#_3-2、使用分包" aria-hidden="true">#</a> 3.2、使用分包</h3><p>配置方法：</p><p>在 app.json 配置文件中, 新增 subpackages 的节点, 将希望放到分包的页面,写入 subpackages 数组的 元素中.</p><p>打包原则：</p><ol><li>小程序会按 subpackages 的配置进行分包， subpackages 之外的目录将被打包到主包中</li><li>主包也可以有自己的 pages （即最外层的 pages 字段）</li><li>tabBar 页面必须在主包内</li><li>分包之间不能互相嵌套</li></ol><p>引用原则：</p><ol><li>主包无法引用分包内的私有资源</li><li>分包之间不能相互引用私有资源</li><li>分包可以引用主包内的公共资源</li></ol><h3 id="_3-3、独立分包" tabindex="-1"><a class="header-anchor" href="#_3-3、独立分包" aria-hidden="true">#</a> 3.3、独立分包</h3><p>独立分包本质上也是分包，只不过它比较特殊，可以独立于主包和其他分包而单独运行。</p><p>独立分包和普通分包的区别:</p><p>最主要的区别：是否依赖于主包才能运行</p><ul><li>普通分包必须依赖于主包才能运行</li><li>独立分包可以在不下载主包的情况下，独立运行</li></ul><p>独立分包的应用场景:</p><p>开发者可以按需，将某些具有一定功能独立性的页面配置到独立分包中。原因如下：</p><ul><li>当小程序从普通的分包页面启动时，</li><li>需要首先下载主包 而独立分包不依赖主包即可运行，可以很大程度上提升分包页面的启动速度</li></ul><blockquote><p>注意：一个小程序中可以有多个独立分包。</p></blockquote><p>和普通分包对比, 独立分包就是在 subpackages 数组的某个元素中, 配置 independent 为true即可</p><ol start="5"><li>引用原则:</li></ol><p>独立分包和普通分包以及主包之间，是相互隔绝的，不能相互引用彼此的资源！例如：</p><ol><li>主包无法引用独立分包内的私有资源</li><li>独立分包之间，不能相互引用私有资源</li><li>独立分包和普通分包之间，不能相互引用私有资源</li><li>特别注意：独立分包中不能引用主包内的公共资源</li></ol><h3 id="_3-4、分包预下载" tabindex="-1"><a class="header-anchor" href="#_3-4、分包预下载" aria-hidden="true">#</a> 3.4、分包预下载</h3><p>分包预下载指的是：在进入小程序的某个页面时，由框架自动预下载可能需要的分包，从而提升进入后 续分包页面时的启动速度。</p><p>配置分包的预下载：</p><p>预下载分包的行为，会在进入指定的页面时触发。在 app.json 中，使用 preloadRule 节点定义分包 的预下载规则，示例代码如下：</p><div class="language-json ext-json"><pre class="language-json"><code><span class="token property">&quot;preloadRule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 触发分包预下载的页面路径</span>
    <span class="token property">&quot;page/concact/concact&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// network 表示在指定的网络模式下进行预下载</span>
      <span class="token comment">// 可选值有： all(不限网络)和wifi(仅 wifi 模式下进行预下载)</span>
      <span class="token comment">// 默认值为： wifi</span>
      <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// packages 表示进入页面后， 预下载哪些分包</span>
      <span class="token comment">// 可以通过root 或name 指定预下载哪些分包</span>
      <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pkgA&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>同一个分包中的页面享有共同的预下载大小限额 2M ，例如：</p><p><img src="/assets/package.62aee22a.png" alt=""></p><h2 id="四、自定义-tabbar" tabindex="-1"><a class="header-anchor" href="#四、自定义-tabbar" aria-hidden="true">#</a> 四、自定义 tabBar</h2><p>三大步骤：</p><div class="language-json ext-json"><pre class="language-json"><code><span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2、在项目根目录下创建custom-tab-bar文件夹, 并创建index组件</p><p>新建Component，输入组件名比如 index，自动生成以下文件：</p><div class="language-text ext-text"><pre class="language-text"><code>custom-tab-bar/index.js
custom-tab-bar/index.json
custom-tab-bar/index.wxml
custom-tab-bar/index.wxss

</code></pre></div><blockquote><p>注意: 文件夹的名称和组件的名称都不能改</p></blockquote><p>3、编写 tabBar 代码</p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.4409970e.js" defer></script>
  </body>
</html>
